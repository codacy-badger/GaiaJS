!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.gaia=t():e.gaia=t()}(global,function(){return function(e){var t,n=!0,r="8620854ef28c7558f614",i={},s=[],o=[];function a(e){var n=O[e];if(!n)return C;var r=function(r){return n.hot.active?(O[r]?-1===O[r].parents.indexOf(e)&&O[r].parents.push(e):(s=[e],t=r),-1===n.children.indexOf(r)&&n.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),s=[]),C(r)},i=function(e){return{configurable:!0,enumerable:!0,get:function(){return C[e]},set:function(t){C[e]=t}}};for(var o in C)Object.prototype.hasOwnProperty.call(C,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(r,o,i(o));return r.e=function(e){return"ready"===h&&u("prepare"),_++,C.e(e).then(t,function(e){throw t(),e});function t(){_--,"prepare"===h&&(g[e]||E(e),0===_&&0===f&&S())}},r.t=function(e,t){return 1&t&&(e=r(e)),C.t(e,-2&t)},r}var c=[],h="idle";function u(e){h=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var p,d,l,f=0,_=0,g={},m={},v={};function y(e){return+e+""===e?+e:e}function b(e){if("idle"!==h)throw new Error("check() is only allowed in idle status");return n=e,u("check"),function(){try{var e=require("./"+r+".hot-update.json")}catch(e){return Promise.resolve()}return Promise.resolve(e)}().then(function(e){if(!e)return u("idle"),null;m={},g={},v=e.c,l=e.h,u("prepare");var t=new Promise(function(e,t){p={resolve:e,reject:t}});return d={},E(0),"prepare"===h&&0===_&&0===f&&S(),t})}function E(e){v[e]?(m[e]=!0,f++,function(e){var t=require("./"+e+"."+r+".hot-update.js");!function(e,t){if(v[e]&&m[e]){for(var n in m[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(d[n]=t[n]);0==--f&&0===_&&S()}}(t.id,t.modules)}(e)):g[e]=!0}function S(){u("ready");var e=p;if(p=null,e)if(n)Promise.resolve().then(function(){return w(n)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&t.push(y(r));e.resolve(t)}}function w(t){if("ready"!==h)throw new Error("apply() is only allowed in ready status");var n,o,a,c,p;function f(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var i=r.pop(),s=i.id,o=i.chain;if((c=O[s])&&!c.hot._selfAccepted){if(c.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:s};if(c.hot._main)return{type:"unaccepted",chain:o,moduleId:s};for(var a=0;a<c.parents.length;a++){var h=c.parents[a],u=O[h];if(u){if(u.hot._declinedDependencies[s])return{type:"declined",chain:o.concat([h]),moduleId:s,parentId:h};-1===t.indexOf(h)&&(u.hot._acceptedDependencies[s]?(n[h]||(n[h]=[]),_(n[h],[s])):(delete n[h],t.push(h),r.push({chain:o.concat([h]),id:h})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var g={},m=[],b={},E=function(){console.warn("[HMR] unexpected require("+w.moduleId+") to disposed module")};for(var S in d)if(Object.prototype.hasOwnProperty.call(d,S)){var w;p=y(S);var k=!1,x=!1,T=!1,R="";switch((w=d[S]?f(p):{type:"disposed",moduleId:S}).chain&&(R="\nUpdate propagation: "+w.chain.join(" -> ")),w.type){case"self-declined":t.onDeclined&&t.onDeclined(w),t.ignoreDeclined||(k=new Error("Aborted because of self decline: "+w.moduleId+R));break;case"declined":t.onDeclined&&t.onDeclined(w),t.ignoreDeclined||(k=new Error("Aborted because of declined dependency: "+w.moduleId+" in "+w.parentId+R));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(w),t.ignoreUnaccepted||(k=new Error("Aborted because "+p+" is not accepted"+R));break;case"accepted":t.onAccepted&&t.onAccepted(w),x=!0;break;case"disposed":t.onDisposed&&t.onDisposed(w),T=!0;break;default:throw new Error("Unexception type "+w.type)}if(k)return u("abort"),Promise.reject(k);if(x)for(p in b[p]=d[p],_(m,w.outdatedModules),w.outdatedDependencies)Object.prototype.hasOwnProperty.call(w.outdatedDependencies,p)&&(g[p]||(g[p]=[]),_(g[p],w.outdatedDependencies[p]));T&&(_(m,[w.moduleId]),b[p]=E)}var A,P=[];for(o=0;o<m.length;o++)p=m[o],O[p]&&O[p].hot._selfAccepted&&P.push({module:p,errorHandler:O[p].hot._selfAccepted});u("dispose"),Object.keys(v).forEach(function(e){!1===v[e]&&function(e){delete installedChunks[e]}(e)});for(var N,L,I=m.slice();I.length>0;)if(p=I.pop(),c=O[p]){var D={},H=c.hot._disposeHandlers;for(a=0;a<H.length;a++)(n=H[a])(D);for(i[p]=D,c.hot.active=!1,delete O[p],delete g[p],a=0;a<c.children.length;a++){var B=O[c.children[a]];B&&(A=B.parents.indexOf(p))>=0&&B.parents.splice(A,1)}}for(p in g)if(Object.prototype.hasOwnProperty.call(g,p)&&(c=O[p]))for(L=g[p],a=0;a<L.length;a++)N=L[a],(A=c.children.indexOf(N))>=0&&c.children.splice(A,1);for(p in u("apply"),r=l,b)Object.prototype.hasOwnProperty.call(b,p)&&(e[p]=b[p]);var U=null;for(p in g)if(Object.prototype.hasOwnProperty.call(g,p)&&(c=O[p])){L=g[p];var j=[];for(o=0;o<L.length;o++)if(N=L[o],n=c.hot._acceptedDependencies[N]){if(-1!==j.indexOf(n))continue;j.push(n)}for(o=0;o<j.length;o++){n=j[o];try{n(L)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:p,dependencyId:L[o],error:e}),t.ignoreErrored||U||(U=e)}}}for(o=0;o<P.length;o++){var M=P[o];p=M.module,s=[p];try{C(p)}catch(e){if("function"==typeof M.errorHandler)try{M.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:p,error:n,originalError:e}),t.ignoreErrored||U||(U=n),U||(U=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:p,error:e}),t.ignoreErrored||U||(U=e)}}return U?(u("fail"),Promise.reject(U)):(u("idle"),new Promise(function(e){e(m)}))}var O={};function C(n){if(O[n])return O[n].exports;var r=O[n]={i:n,l:!1,exports:{},hot:function(e){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:t!==e,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)n._acceptedDependencies[e[r]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);t>=0&&n._disposeHandlers.splice(t,1)},check:b,apply:w,status:function(e){if(!e)return h;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:i[e]};return t=void 0,n}(n),parents:(o=s,s=[],o),children:[]};return e[n].call(r.exports,r,r.exports,a(n)),r.l=!0,r.exports}return C.m=e,C.c=O,C.d=function(e,t,n){C.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},C.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},C.t=function(e,t){if(1&t&&(e=C(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(C.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)C.d(n,r,function(t){return e[t]}.bind(null,r));return n},C.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return C.d(t,"a",t),t},C.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},C.p="",C.h=function(){return r},a(36)(C.s=36)}([function(e,t){e.exports=require("util")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),i=function(){function e(e){this.name=e}return e.isNested=function(e){return e.hasClass("block")||"TD"===e.prop("tagName")},e.renderElements=function(e,t,n){var i=new r.Renderer(e);Array.from(t.elements).map(function(e){return Object.assign(e,{position:t.position})}).forEach(function(e){return i.render(e,n)})},e}();t.MarkupComponent=i},function(e,t){e.exports=require("events")},function(e,t,n){(function(){var e,r,i;e=n(5),t.array_intersection=function(e,t){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],-1!==t.indexOf(n)&&s.push(n);return s},t.escape_selected=function(e,t){var n,r,i,s,o,a,c,h,u,p;for(a={},i=0,o=(t="%"+t).length;i<o;i++)a[n=t[i]]=escape(n);for(h=new RegExp("(["+t+"])"),r=s=0,u=(c=e.split(h)).length;0<=u?s<u:s>u;r=0<=u?++s:--s)1===(p=c[r]).length&&p in a&&(c[r]=a[p]);return c.join("")},t.buffer_concat=function(e,t){var n;return n=new Buffer(e.length+t.length),e.copy(n),t.copy(n,e.length),n},t.md5_hex=function(t){return e.createHash("md5").update(t).digest("hex")},t.sha1_base64=function(t){return e.createHash("sha1").update(t).digest("base64")},t.timeout_chain=function(e){var n,r,i;if((e=e.slice(0)).length)return r=(n=e.shift())[0],i=n[1],setTimeout(function(){return i(),t.timeout_chain(e)},r)},t.objectExtend=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t.overshadowListeners=function(e,t,n){var r,i;return i=e.listeners(t).slice(0),e.removeAllListeners(t),r=function(){var e,t;if(!0!==n.apply(this,arguments)){for(e=0,t=i.length;e<t;e++)i[e].apply(this,arguments);return!1}return!0},e.addListener(t,r)},i=function(e){var t,n,r;return r={},t=function(){var e,t;for(t=[],n=e=0;e<65536;n=++e)t.push(String.fromCharCode(n));return t}(),e.lastIndex=0,t.join("").replace(e,function(e){return r[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}),r}(r=/[\x00-\x1f\ud800-\udfff\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufff0-\uffff]/g),t.quote=function(e){var t;return t=JSON.stringify(e),r.lastIndex=0,r.test(t)?t.replace(r,function(e){return i[e]}):t},t.parseCookie=function(e){var t,n,r,i,s;if(t={},e)for(n=0,r=(s=e.split(";")).length;n<r;n++)t[(i=s[n].split("="))[0].trim()]=(i[1]||"").trim();return t},t.random32=function(){var t,n;return(n=[(t=e.randomBytes(4))[0],t[1],t[2],t[3]])[0]+256*n[1]+256*n[2]*256+256*n[3]*256*256}}).call(this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(76);var r=function(){function e(e){this.text=e}return e.prototype.render=function(){var e=document.createElement("div");return e.classList.add("inline-text"),e.appendChild(document.createTextNode(this.text)),e},e}();t.InlineText=r},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";var r=n(2).EventEmitter,i=n(0),s=n(118),o=n(20),a=n(119),c=function(e,t,n){r.call(this),c.validateOptions(n||{},["maxLength","masking","requireMasking","protocols"]),this._request=e,this._reader=new a,this._options=n||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new o,this.__queue=[],this.readyState=0,this.url=t,this.io=new s.IO(this),this.messages=new s.Messages(this),this._bindEventListeners()};i.inherits(c,r),c.validateOptions=function(e,t){for(var n in e)if(t.indexOf(n)<0)throw new Error("Unrecognized option: "+n)};var h={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var e=this;this.messages.on("error",function(){}),this.on("message",function(t){var n=e.messages;n.readable&&n.emit("data",t.data)}),this.on("error",function(t){var n=e.messages;n.readable&&n.emit("error",t)}),this.on("close",function(){var t=e.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))})},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(e){return!1},setHeader:function(e,t){return!(this.readyState>0||(this._headers.set(e,t),0))},start:function(){if(0!==this.readyState)return!1;var e=this._handshakeResponse();return!!e&&(this._write(e),-1!==this._stage&&this._open(),!0)},text:function(e){return this.frame(e)},binary:function(e){return!1},ping:function(){return!1},pong:function(){return!1},close:function(e,t){return 1===this.readyState&&(this.readyState=3,this.emit("close",new c.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach(function(e){this.frame.apply(this,e)},this),this.__queue=[],this.emit("open",new c.OpenEvent)},_queue:function(e){return this.__queue.push(e),!0},_write:function(e){var t=this.io;t.readable&&t.emit("data",e)}};for(var u in h)c.prototype[u]=h[u];c.ConnectEvent=function(){},c.OpenEvent=function(){},c.CloseEvent=function(e,t){this.code=e,this.reason=t},c.MessageEvent=function(e){this.data=e},c.PingEvent=function(e){this.data=e},c.PongEvent=function(e){this.data=e},e.exports=c},function(e,t){e.exports=require("url")},function(e,t,n){var r=t.noop=function(){};function i(e,t,n){this.logFunction=n,this.identifier=e,this.uniqueID=t,this.buffer=[]}t.extend=function(e,t){for(var n in t)e[n]=t[n]},t.eventEmitterListenerCount=n(2).EventEmitter.listenerCount||function(e,t){return e.listeners(t).length},t.BufferingLogger=function(e,t){var s=n(24)(e);if(s.enabled){var o=new i(e,t,s),a=o.log.bind(o);return a.printOutput=o.printOutput.bind(o),a.enabled=s.enabled,a}return s.printOutput=r,s},i.prototype.log=function(){return this.buffer.push([new Date,Array.prototype.slice.call(arguments)]),this},i.prototype.clear=function(){return this.buffer=[],this},i.prototype.printOutput=function(e){e||(e=this.logFunction);var t=this.uniqueID;this.buffer.forEach(function(n){var r=n[0].toLocaleString(),i=n[1].slice(),s=i[0];void 0!==s&&null!==s&&(s="%s - %s - "+s.toString(),i.splice(0,1,s,r,t),e.apply(global,i))})}},function(e,t){e.exports=require("stream")},function(e,t,n){(function(){var e,r,i,s,o,a,c,h,u,p,d,l=function(e,t){for(var n in t)f.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},f={}.hasOwnProperty;u=n(9),d=n(136),p=n(3),(a=function(){}).CONNECTING=0,a.OPEN=1,a.CLOSING=2,a.CLOSED=3,c=function(e,t){return"c"+JSON.stringify([e,t])},(o=function(e){function t(e){this._session=e,this.id=d(),this.headers={},this.prefix=this._session.prefix}return l(t,e),t.prototype.toString=function(){return"<SockJSConnection "+this.id+">"},t.prototype.write=function(e){return this._session.send(""+e)},t.prototype.end=function(e){return e&&this.write(e),this.close(),null},t.prototype.close=function(e,t){return this._session.close(e,t)},t.prototype.destroy=function(){return this.end(),this.removeAllListeners()},t.prototype.destroySoon=function(){return this.destroy()},t}(u.Stream)).prototype.__defineGetter__("readable",function(){return this._session.readyState===a.OPEN}),o.prototype.__defineGetter__("writable",function(){return this._session.readyState===a.OPEN}),o.prototype.__defineGetter__("readyState",function(){return this._session.readyState}),r={},(s=function(){function e(e,t){this.session_id=e,this.heartbeat_delay=t.options.heartbeat_delay,this.disconnect_delay=t.options.disconnect_delay,this.prefix=t.options.prefix,this.send_buffer=[],this.is_closing=!1,this.readyState=a.CONNECTING,this.session_id&&(r[this.session_id]=this),this.timeout_cb=function(e){return function(){return e.didTimeout()}}(this),this.to_tref=setTimeout(this.timeout_cb,this.disconnect_delay),this.connection=new o(this),this.emit_open=function(e){return function(){return e.emit_open=null,t.emit("connection",e.connection)}}(this)}return e.prototype.register=function(e,t){return this.recv?(t.doSendFrame(c(2010,"Another connection still open")),void t.didClose()):(this.to_tref&&(clearTimeout(this.to_tref),this.to_tref=null),this.readyState===a.CLOSING?(this.flushToRecv(t),t.doSendFrame(this.close_frame),t.didClose(),void(this.to_tref=setTimeout(this.timeout_cb,this.disconnect_delay))):(this.recv=t,this.recv.session=this,this.decorateConnection(e),this.readyState===a.CONNECTING&&(this.recv.doSendFrame("o"),this.readyState=a.OPEN,process.nextTick(this.emit_open)),void(this.recv&&this.tryFlush())))},e.prototype.decorateConnection=function(e){var t,n,r,i,s,o,a,c,h;(h=this.recv.connection)||(h=this.recv.response.connection);try{a=h.remoteAddress,c=h.remotePort,t=h.address()}catch(e){}for(a&&(this.connection.remoteAddress=a,this.connection.remotePort=c,this.connection.address=t),this.connection.url=e.url,this.connection.pathname=e.pathname,this.connection.protocol=this.recv.protocol,n={},r=0,s=(o=["referer","x-client-ip","x-forwarded-for","x-forwarded-host","x-forwarded-port","x-cluster-client-ip","via","x-real-ip","x-forwarded-proto","x-ssl","dnt","host","user-agent","accept-language"]).length;r<s;r++)i=o[r],e.headers[i]&&(n[i]=e.headers[i]);if(n)return this.connection.headers=n},e.prototype.unregister=function(){var e;return e=this.recv.delay_disconnect,this.recv.session=null,this.recv=null,this.to_tref&&clearTimeout(this.to_tref),e?this.to_tref=setTimeout(this.timeout_cb,this.disconnect_delay):this.timeout_cb()},e.prototype.flushToRecv=function(e){var t,n;return this.send_buffer.length>0&&(n=(t=[this.send_buffer,[]])[0],this.send_buffer=t[1],e.doSendBulk(n),!0)},e.prototype.tryFlush=function(){var e;this.flushToRecv(this.recv)&&this.to_tref||(this.to_tref&&clearTimeout(this.to_tref),e=function(t){return function(){if(t.recv)return t.to_tref=setTimeout(e,t.heartbeat_delay),t.recv.heartbeat()}}(this),this.to_tref=setTimeout(e,this.heartbeat_delay))},e.prototype.didTimeout=function(){if(this.to_tref&&(clearTimeout(this.to_tref),this.to_tref=null),this.readyState!==a.CONNECTING&&this.readyState!==a.OPEN&&this.readyState!==a.CLOSING)throw Error("INVALID_STATE_ERR");if(this.recv)throw Error("RECV_STILL_THERE");if(this.readyState=a.CLOSED,this.connection.emit("end"),this.connection.emit("close"),this.connection=null,this.session_id)return delete r[this.session_id],this.session_id=null},e.prototype.didMessage=function(e){this.readyState===a.OPEN&&this.connection.emit("data",e)},e.prototype.send=function(e){return this.readyState===a.OPEN&&(this.send_buffer.push(""+e),this.recv&&this.tryFlush(),!0)},e.prototype.close=function(e,t){return null==e&&(e=1e3),null==t&&(t="Normal closure"),this.readyState===a.OPEN&&(this.readyState=a.CLOSING,this.close_frame=c(e,t),this.recv&&(this.recv.doSendFrame(this.close_frame),this.recv&&this.recv.didClose(),this.recv&&this.unregister()),!0)},e}()).bySessionId=function(e){return e&&r[e]||null},h=function(e,t,n,r){var i;return(i=s.bySessionId(n))||(i=new s(n,t)),i.register(e,r),i},t.register=function(e,t,n){return h(e,t,e.session,n)},t.registerNoSession=function(e,t,n){return h(e,t,void 0,n)},e=function(){function e(e){this.thingy=e,this.setUp(this.thingy)}return e.prototype.setUp=function(){return this.thingy_end_cb=function(e){return function(){return e.didAbort()}}(this),this.thingy.addListener("close",this.thingy_end_cb),this.thingy.addListener("end",this.thingy_end_cb)},e.prototype.tearDown=function(){return this.thingy.removeListener("close",this.thingy_end_cb),this.thingy.removeListener("end",this.thingy_end_cb),this.thingy_end_cb=null},e.prototype.didAbort=function(){return this.delay_disconnect=!1,this.didClose()},e.prototype.didClose=function(){if(this.thingy&&(this.tearDown(this.thingy),this.thingy=null),this.session)return this.session.unregister()},e.prototype.doSendBulk=function(e){var t,n;return n=function(){var n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(p.quote(t));return i}(),this.doSendFrame("a["+n.join(",")+"]")},e.prototype.heartbeat=function(){return this.doSendFrame("h")},e}(),i=function(t){function n(e,t,r){this.request=e,this.response=t,this.options=r,this.curr_response_size=0;try{this.request.connection.setKeepAlive(!0,5e3)}catch(e){}n.__super__.constructor.call(this,this.request.connection),void 0===this.max_response_size&&(this.max_response_size=this.options.response_limit)}return l(n,e),n.prototype.max_response_size=void 0,n.prototype.delay_disconnect=!0,n.prototype.doSendFrame=function(e){var t;this.curr_response_size+=e.length,t=!1;try{this.response.write(e),t=!0}catch(e){}return this.max_response_size&&this.curr_response_size>=this.max_response_size&&this.didClose(),t},n.prototype.didClose=function(){n.__super__.didClose.apply(this,arguments);try{this.response.end()}catch(e){}return this.response=null},n}(),t.GenericReceiver=e,t.Transport=a,t.Session=s,t.ResponseReceiver=i,t.SockJSConnection=o}).call(this)},function(e,t,n){"use strict";var r=n(6),i=n(120),s=n(131),o={client:function(e,t){return void 0===(t=t||{}).masking&&(t.masking=!0),new i(e,t)},server:function(e){return void 0===(e=e||{}).requireMasking&&(e.requireMasking=!0),new s(e)},http:function(){return s.http.apply(s,arguments)},isSecureRequest:function(e){return s.isSecureRequest(e)},isWebSocket:function(e){if("GET"!==e.method)return!1;var t=e.headers.connection||"",n=e.headers.upgrade||"";return"GET"===e.method&&t.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&"websocket"===n.toLowerCase()},validateOptions:function(e,t){r.validateOptions(e,t)}};e.exports=o},function(e,t){var n=function(e,t){for(var n in this.type=e,t)this[n]=t[n]};n.prototype.initEvent=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},n.prototype.stopPropagation=function(){},n.prototype.preventDefault=function(){},n.CAPTURING_PHASE=1,n.AT_TARGET=2,n.BUBBLING_PHASE=3,e.exports=n},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("fs")},function(e,t,n){var r=n(0),i=n(8),s=n(2).EventEmitter,o=n(27),a=n(49),c=n(51).Validation;const h="open";var u="setImmediate"in global?global.setImmediate.bind(global):process.nextTick.bind(process),p=0;function d(e,t,n,r,c){if(this._debug=i.BufferingLogger("websocket:connection",++p),this._debug("constructor"),this._debug.enabled&&function(e,t){if(e._debug.enabled){var n=t.emit;for(var r in t.emit=function(t){e._debug("||| Socket Event  '%s'",t),n.apply(this,arguments)},t)"function"==typeof t[r]&&-1===["emit"].indexOf(r)&&function(n){var r=t[n];t[n]="on"!==n?function(){return e._debug("||| Socket method called:  %s",n),r.apply(this,arguments)}:function(){return e._debug("||| Socket method called:  %s (%s)",n,arguments[0]),r.apply(this,arguments)}}(r)}}(this,e),s.call(this),this._pingListenerCount=0,this.on("newListener",function(e){"ping"===e&&this._pingListenerCount++}).on("removeListener",function(e){"ping"===e&&this._pingListenerCount--}),this.config=c,this.socket=e,this.protocol=n,this.extensions=t,this.remoteAddress=e.remoteAddress,this.closeReasonCode=-1,this.closeDescription=null,this.closeEventEmitted=!1,this.maskOutgoingPackets=r,this.maskBytes=new Buffer(4),this.frameHeader=new Buffer(10),this.bufferList=new a,this.currentFrame=new o(this.maskBytes,this.frameHeader,this.config),this.fragmentationSize=0,this.frameQueue=[],this.connected=!0,this.state=h,this.waitingForCloseResponse=!1,this.receivedEnd=!1,this.closeTimeout=this.config.closeTimeout,this.assembleFragments=this.config.assembleFragments,this.maxReceivedMessageSize=this.config.maxReceivedMessageSize,this.outputBufferFull=!1,this.inputPaused=!1,this.receivedDataHandler=this.processReceivedData.bind(this),this._closeTimerHandler=this.handleCloseTimer.bind(this),this.socket.setNoDelay(this.config.disableNagleAlgorithm),this.socket.setTimeout(0),this.config.keepalive&&!this.config.useNativeKeepalive){if("number"!=typeof this.config.keepaliveInterval)throw new Error("keepaliveInterval must be specified and numeric if keepalive is true.");if(this._keepaliveTimerHandler=this.handleKeepaliveTimer.bind(this),this.setKeepaliveTimer(),this.config.dropConnectionOnKeepaliveTimeout){if("number"!=typeof this.config.keepaliveGracePeriod)throw new Error("keepaliveGracePeriod  must be specified and numeric if dropConnectionOnKeepaliveTimeout is true.");this._gracePeriodTimerHandler=this.handleGracePeriodTimer.bind(this)}}else if(this.config.keepalive&&this.config.useNativeKeepalive){if(!("setKeepAlive"in this.socket))throw new Error("Unable to use native keepalive: unsupported by this version of Node.");this.socket.setKeepAlive(!0,this.config.keepaliveInterval)}this.socket.removeAllListeners("error")}function l(e){return!(e<1e3)&&(e>=1e3&&e<=2999?-1!==[1e3,1001,1002,1003,1007,1008,1009,1010,1011,1012,1013,1014].indexOf(e):e>=3e3&&e<=3999||e>=4e3&&e<=4999||!(e>=5e3)&&void 0)}d.CLOSE_REASON_NORMAL=1e3,d.CLOSE_REASON_GOING_AWAY=1001,d.CLOSE_REASON_PROTOCOL_ERROR=1002,d.CLOSE_REASON_UNPROCESSABLE_INPUT=1003,d.CLOSE_REASON_RESERVED=1004,d.CLOSE_REASON_NOT_PROVIDED=1005,d.CLOSE_REASON_ABNORMAL=1006,d.CLOSE_REASON_INVALID_DATA=1007,d.CLOSE_REASON_POLICY_VIOLATION=1008,d.CLOSE_REASON_MESSAGE_TOO_BIG=1009,d.CLOSE_REASON_EXTENSION_REQUIRED=1010,d.CLOSE_REASON_INTERNAL_SERVER_ERROR=1011,d.CLOSE_REASON_TLS_HANDSHAKE_FAILED=1015,d.CLOSE_DESCRIPTIONS={1000:"Normal connection closure",1001:"Remote peer is going away",1002:"Protocol error",1003:"Unprocessable input",1004:"Reserved",1005:"Reason not provided",1006:"Abnormal closure, no further detail available",1007:"Invalid data received",1008:"Policy violation",1009:"Message too big",1010:"Extension requested by client is required",1011:"Internal Server Error",1015:"TLS Handshake Failed"},r.inherits(d,s),d.prototype._addSocketEventListeners=function(){this.socket.on("error",this.handleSocketError.bind(this)),this.socket.on("end",this.handleSocketEnd.bind(this)),this.socket.on("close",this.handleSocketClose.bind(this)),this.socket.on("drain",this.handleSocketDrain.bind(this)),this.socket.on("pause",this.handleSocketPause.bind(this)),this.socket.on("resume",this.handleSocketResume.bind(this)),this.socket.on("data",this.handleSocketData.bind(this))},d.prototype.setKeepaliveTimer=function(){this._debug("setKeepaliveTimer"),this.config.keepalive&&!this.config.useNativeKeepalive&&(this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this._keepaliveTimeoutID=setTimeout(this._keepaliveTimerHandler,this.config.keepaliveInterval))},d.prototype.clearKeepaliveTimer=function(){this._keepaliveTimeoutID&&clearTimeout(this._keepaliveTimeoutID)},d.prototype.handleKeepaliveTimer=function(){this._debug("handleKeepaliveTimer"),this._keepaliveTimeoutID=null,this.ping(),this.config.dropConnectionOnKeepaliveTimeout?this.setGracePeriodTimer():this.setKeepaliveTimer()},d.prototype.setGracePeriodTimer=function(){this._debug("setGracePeriodTimer"),this.clearGracePeriodTimer(),this._gracePeriodTimeoutID=setTimeout(this._gracePeriodTimerHandler,this.config.keepaliveGracePeriod)},d.prototype.clearGracePeriodTimer=function(){this._gracePeriodTimeoutID&&clearTimeout(this._gracePeriodTimeoutID)},d.prototype.handleGracePeriodTimer=function(){this._debug("handleGracePeriodTimer"),this._gracePeriodTimeoutID=null,this.drop(d.CLOSE_REASON_ABNORMAL,"Peer not responding.",!0)},d.prototype.handleSocketData=function(e){this._debug("handleSocketData"),this.setKeepaliveTimer(),this.bufferList.write(e),this.processReceivedData()},d.prototype.processReceivedData=function(){if(this._debug("processReceivedData"),this.connected&&!this.inputPaused){var e=this.currentFrame;if(e.addData(this.bufferList)){var t=this;if(e.protocolError)return this._debug("-- protocol error"),void process.nextTick(function(){t.drop(d.CLOSE_REASON_PROTOCOL_ERROR,e.dropReason)});if(e.frameTooLarge)return this._debug("-- frame too large"),void process.nextTick(function(){t.drop(d.CLOSE_REASON_MESSAGE_TOO_BIG,e.dropReason)});if(e.rsv1||e.rsv2||e.rsv3)return this._debug("-- illegal rsv flag"),void process.nextTick(function(){t.drop(d.CLOSE_REASON_PROTOCOL_ERROR,"Unsupported usage of rsv bits without negotiated extension.")});this.assembleFragments||(this._debug("-- emitting frame"),process.nextTick(function(){t.emit("frame",e)})),process.nextTick(function(){t.processFrame(e)}),this.currentFrame=new o(this.maskBytes,this.frameHeader,this.config),this.bufferList.length>0&&u(this.receivedDataHandler)}else this._debug("-- insufficient data for frame")}},d.prototype.handleSocketError=function(e){this._debug("handleSocketError: %j",e),"closed"!==this.state?(this.closeReasonCode=d.CLOSE_REASON_ABNORMAL,this.closeDescription="Socket Error: "+e.syscall+" "+e.code,this.connected=!1,this.state="closed",this.fragmentationSize=0,i.eventEmitterListenerCount(this,"error")>0&&this.emit("error",e),this.socket.destroy(e),this._debug.printOutput()):this._debug("  --- Socket 'error' after 'close'")},d.prototype.handleSocketEnd=function(){this._debug("handleSocketEnd: received socket end.  state = %s",this.state),this.receivedEnd=!0,"closed"!==this.state?"peer_requested_close"!==this.state&&"ending"!==this.state&&(this._debug("  --- UNEXPECTED socket end."),this.socket.end()):this._debug("  --- Socket 'end' after 'close'")},d.prototype.handleSocketClose=function(e){this._debug("handleSocketClose: received socket close"),this.socketHadError=e,this.connected=!1,this.state="closed",-1===this.closeReasonCode&&(this.closeReasonCode=d.CLOSE_REASON_ABNORMAL,this.closeDescription="Connection dropped by remote peer."),this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("-- Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription))},d.prototype.handleSocketDrain=function(){this._debug("handleSocketDrain: socket drain event"),this.outputBufferFull=!1,this.emit("drain")},d.prototype.handleSocketPause=function(){this._debug("handleSocketPause: socket pause event"),this.inputPaused=!0,this.emit("pause")},d.prototype.handleSocketResume=function(){this._debug("handleSocketResume: socket resume event"),this.inputPaused=!1,this.emit("resume"),this.processReceivedData()},d.prototype.pause=function(){this._debug("pause: pause requested"),this.socket.pause()},d.prototype.resume=function(){this._debug("resume: resume requested"),this.socket.resume()},d.prototype.close=function(e,t){if(this.connected){if(this._debug("close: Initating clean WebSocket close sequence."),"number"!=typeof e&&(e=d.CLOSE_REASON_NORMAL),!l(e))throw new Error("Close code "+e+" is not valid.");"string"!=typeof t&&(t=d.CLOSE_DESCRIPTIONS[e]),this.closeReasonCode=e,this.closeDescription=t,this.setCloseTimer(),this.sendCloseFrame(this.closeReasonCode,this.closeDescription),this.state="ending",this.connected=!1}},d.prototype.drop=function(e,t,n){this._debug("drop"),"number"!=typeof e&&(e=d.CLOSE_REASON_PROTOCOL_ERROR),"string"!=typeof t&&(t=d.CLOSE_DESCRIPTIONS[e]),this._debug("Forcefully dropping connection. skipCloseFrame: %s, code: %d, description: %s",n,e,t),this.closeReasonCode=e,this.closeDescription=t,this.frameQueue=[],this.fragmentationSize=0,n||this.sendCloseFrame(e,t),this.connected=!1,this.state="closed",this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription)),this._debug("Drop: destroying socket"),this.socket.destroy()},d.prototype.setCloseTimer=function(){this._debug("setCloseTimer"),this.clearCloseTimer(),this._debug("Setting close timer"),this.waitingForCloseResponse=!0,this.closeTimer=setTimeout(this._closeTimerHandler,this.closeTimeout)},d.prototype.clearCloseTimer=function(){this._debug("clearCloseTimer"),this.closeTimer&&(this._debug("Clearing close timer"),clearTimeout(this.closeTimer),this.waitingForCloseResponse=!1,this.closeTimer=null)},d.prototype.handleCloseTimer=function(){this._debug("handleCloseTimer"),this.closeTimer=null,this.waitingForCloseResponse&&(this._debug("Close response not received from client.  Forcing socket end."),this.waitingForCloseResponse=!1,this.state="closed",this.socket.end())},d.prototype.processFrame=function(e){if(this._debug("processFrame"),this._debug(" -- frame: %s",e),0!==this.frameQueue.length&&e.opcode>0&&e.opcode<8)this.drop(d.CLOSE_REASON_PROTOCOL_ERROR,"Illegal frame opcode 0x"+e.opcode.toString(16)+" received in middle of fragmented message.");else switch(e.opcode){case 2:this._debug("-- Binary Frame"),this.assembleFragments&&(e.fin?(this._debug("---- Emitting 'message' event"),this.emit("message",{type:"binary",binaryData:e.binaryPayload})):(this.frameQueue.push(e),this.fragmentationSize=e.length));break;case 1:if(this._debug("-- Text Frame"),this.assembleFragments)if(e.fin){if(!c.isValidUTF8(e.binaryPayload))return void this.drop(d.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this._debug("---- Emitting 'message' event"),this.emit("message",{type:"utf8",utf8Data:e.binaryPayload.toString("utf8")})}else this.frameQueue.push(e),this.fragmentationSize=e.length;break;case 0:if(this._debug("-- Continuation Frame"),this.assembleFragments){if(0===this.frameQueue.length)return void this.drop(d.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected Continuation Frame");if(this.fragmentationSize+=e.length,this.fragmentationSize>this.maxReceivedMessageSize)return void this.drop(d.CLOSE_REASON_MESSAGE_TOO_BIG,"Maximum message size exceeded.");if(this.frameQueue.push(e),e.fin){var t=0,n=new Buffer(this.fragmentationSize),r=this.frameQueue[0].opcode;switch(this.frameQueue.forEach(function(e){e.binaryPayload.copy(n,t),t+=e.binaryPayload.length}),this.frameQueue=[],this.fragmentationSize=0,r){case 2:this.emit("message",{type:"binary",binaryData:n});break;case 1:if(!c.isValidUTF8(n))return void this.drop(d.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this.emit("message",{type:"utf8",utf8Data:n.toString("utf8")});break;default:return void this.drop(d.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected first opcode in fragmentation sequence: 0x"+r.toString(16))}}}break;case 9:if(this._debug("-- Ping Frame"),this._pingListenerCount>0){var i=!1;this.emit("ping",function(){i=!0},e.binaryPayload),i||this.pong(e.binaryPayload)}else this.pong(e.binaryPayload);break;case 10:this._debug("-- Pong Frame"),this.emit("pong",e.binaryPayload);break;case 8:if(this._debug("-- Close Frame"),this.waitingForCloseResponse)return this._debug("---- Got close response from peer.  Completing closing handshake."),this.clearCloseTimer(),this.waitingForCloseResponse=!1,this.state="closed",void this.socket.end();var s;if(this._debug("---- Closing handshake initiated by peer."),this.state="peer_requested_close",e.invalidCloseFrameLength?(this.closeReasonCode=1005,s=d.CLOSE_REASON_PROTOCOL_ERROR):-1===e.closeStatus||l(e.closeStatus)?(this.closeReasonCode=e.closeStatus,s=d.CLOSE_REASON_NORMAL):(this.closeReasonCode=e.closeStatus,s=d.CLOSE_REASON_PROTOCOL_ERROR),e.binaryPayload.length>1){if(!c.isValidUTF8(e.binaryPayload))return void this.drop(d.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");this.closeDescription=e.binaryPayload.toString("utf8")}else this.closeDescription=d.CLOSE_DESCRIPTIONS[this.closeReasonCode];this._debug("------ Remote peer %s - code: %d - %s - close frame payload length: %d",this.remoteAddress,this.closeReasonCode,this.closeDescription,e.length),this._debug("------ responding to remote peer's close request."),this.sendCloseFrame(s,null),this.connected=!1;break;default:this._debug("-- Unrecognized Opcode %d",e.opcode),this.drop(d.CLOSE_REASON_PROTOCOL_ERROR,"Unrecognized Opcode: 0x"+e.opcode.toString(16))}},d.prototype.send=function(e,t){if(this._debug("send"),Buffer.isBuffer(e))this.sendBytes(e,t);else{if("function"!=typeof e.toString)throw new Error("Data provided must either be a Node Buffer or implement toString()");this.sendUTF(e,t)}},d.prototype.sendUTF=function(e,t){e=new Buffer(e.toString(),"utf8"),this._debug("sendUTF: %d bytes",e.length);var n=new o(this.maskBytes,this.frameHeader,this.config);n.opcode=1,n.binaryPayload=e,this.fragmentAndSend(n,t)},d.prototype.sendBytes=function(e,t){if(this._debug("sendBytes"),!Buffer.isBuffer(e))throw new Error("You must pass a Node Buffer object to WebSocketConnection.prototype.sendBytes()");var n=new o(this.maskBytes,this.frameHeader,this.config);n.opcode=2,n.binaryPayload=e,this.fragmentAndSend(n,t)},d.prototype.ping=function(e){this._debug("ping");var t=new o(this.maskBytes,this.frameHeader,this.config);t.opcode=9,t.fin=!0,e&&(Buffer.isBuffer(e)||(e=new Buffer(e.toString(),"utf8")),e.length>125&&(this._debug("WebSocket: Data for ping is longer than 125 bytes.  Truncating."),e=e.slice(0,124)),t.binaryPayload=e),this.sendFrame(t)},d.prototype.pong=function(e){this._debug("pong");var t=new o(this.maskBytes,this.frameHeader,this.config);t.opcode=10,Buffer.isBuffer(e)&&e.length>125&&(this._debug("WebSocket: Data for pong is longer than 125 bytes.  Truncating."),e=e.slice(0,124)),t.binaryPayload=e,t.fin=!0,this.sendFrame(t)},d.prototype.fragmentAndSend=function(e,t){if(this._debug("fragmentAndSend"),e.opcode>7)throw new Error("You cannot fragment control frames.");var n=this.config.fragmentationThreshold,r=e.binaryPayload.length;if(!this.config.fragmentOutgoingMessages||e.binaryPayload&&r<=n)return e.fin=!0,void this.sendFrame(e,t);for(var i=Math.ceil(r/n),s=0,a=function(e){e?"function"==typeof t&&(t(e),t=null):++s===i&&"function"==typeof t&&t()},c=1;c<=i;c++){var h=new o(this.maskBytes,this.frameHeader,this.config);h.opcode=1===c?e.opcode:0,h.fin=c===i;var u=c===i?r-n*(c-1):n,p=n*(c-1);h.binaryPayload=e.binaryPayload.slice(p,p+u),this.sendFrame(h,a)}},d.prototype.sendCloseFrame=function(e,t,n){if("number"!=typeof e&&(e=d.CLOSE_REASON_NORMAL),this._debug("sendCloseFrame state: %s, reasonCode: %d, description: %s",this.state,e,t),this.state===h||"peer_requested_close"===this.state){var r=new o(this.maskBytes,this.frameHeader,this.config);r.fin=!0,r.opcode=8,r.closeStatus=e,"string"==typeof t&&(r.binaryPayload=new Buffer(t,"utf8")),this.sendFrame(r,n),this.socket.end()}},d.prototype.sendFrame=function(e,t){this._debug("sendFrame"),e.mask=this.maskOutgoingPackets;var n=this.socket.write(e.toBuffer(),t);return this.outputBufferFull=!n,n},e.exports=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(67);var r=function(){function e(e){this.position=e}return e.prototype.render=function(){var e=document.createElement("div");return e.classList.add("text-icon",this.position),e},e}();t.TextIcon=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(69);var r=function(){function e(){}return e.render=function(){var e=new Date,t=function(e){return e.toString().padStart(2,"0")},n=document.createElement("span");return n.classList.add("text-time"),n.appendChild(document.createTextNode(t(e.getHours())+":"+t(e.getMinutes()))),n},e}();t.TextTime=r},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=function(){this.clear()};r.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"],r.prototype.clear=function(){this._sent={},this._lines=[]},r.prototype.set=function(e,t){if(void 0!==t){e=this._strip(e),t=this._strip(t);var n=e.toLowerCase();(!this._sent.hasOwnProperty(n)||this.ALLOWED_DUPLICATES.indexOf(n)>=0)&&(this._sent[n]=!0,this._lines.push(e+": "+t+"\r\n"))}},r.prototype.toString=function(){return this._lines.join("")},r.prototype._strip=function(e){return e.toString().replace(/^ */,"").replace(/ *$/,"")},e.exports=r},function(e,t,n){"use strict";var r=n(121).HTTPParser,i=process.version.match(/[0-9]+/g).map(function(e){return parseInt(e,10)}),s={request:r.REQUEST||"request",response:r.RESPONSE||"response"},o=function(e){this._type=e,this._parser=new r(s[e]),this._complete=!1,this.headers={};var t=null,n=this;this._parser.onHeaderField=function(e,n,r){t=e.toString("utf8",n,n+r).toLowerCase()},this._parser.onHeaderValue=function(e,r,i){var s=e.toString("utf8",r,r+i);n.headers.hasOwnProperty(t)?n.headers[t]+=", "+s:n.headers[t]=s},this._parser.onHeadersComplete=this._parser[r.kOnHeadersComplete]=function(e,t,r,i,s,a){var c=arguments[0];if("object"==typeof c&&(i=c.method,s=c.url,a=c.statusCode,r=c.headers),n.method="number"==typeof i?o.METHODS[i]:i,n.statusCode=a,n.url=s,r){for(var h,u,p=0,d=r.length;p<d;p+=2)h=r[p].toLowerCase(),u=r[p+1],n.headers.hasOwnProperty(h)?n.headers[h]+=", "+u:n.headers[h]=u;n._complete=!0}}};o.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"},0===i[0]&&12===i[1]&&(o.METHODS[16]="REPORT",o.METHODS[17]="MKACTIVITY",o.METHODS[18]="CHECKOUT",o.METHODS[19]="MERGE",o.METHODS[20]="M-SEARCH",o.METHODS[21]="NOTIFY",o.METHODS[22]="SUBSCRIBE",o.METHODS[23]="UNSUBSCRIBE",o.METHODS[24]="PATCH",o.METHODS[25]="PURGE"),o.prototype.isComplete=function(){return this._complete},o.prototype.parse=function(e){var t=this._parser.execute(e,0,e.length);if("number"!=typeof t)return this.error=t,void(this._complete=!0);0===i[0]&&i[1]<6&&(t+=1),this._complete&&(this.body=t<e.length?e.slice(t):new Buffer(0))},e.exports=o},function(e,t,n){var r=n(9).Stream,i=n(0),s=n(11),o=n(35),a=n(12),c=function(e){e=e||{},s.validateOptions(e,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var t=e.headers;if(t)for(var n in t)this._driver.setHeader(n,t[n]);var r=e.extensions;r&&[].concat(r).forEach(this._driver.addExtension,this._driver),this._ping=e.ping,this._pingId=0,this.readyState=c.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var i=this;this._driver.on("open",function(e){i._open()}),this._driver.on("message",function(e){i._receiveMessage(e.data)}),this._driver.on("close",function(e){i._beginClose(e.reason,e.code)}),this._driver.on("error",function(e){i._emitError(e.message)}),this.on("error",function(){}),this._driver.messages.on("drain",function(){i.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){i._pingId+=1,i.ping(i._pingId.toString())},1e3*this._ping)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))};i.inherits(c,r),c.CONNECTING=0,c.OPEN=1,c.CLOSING=2,c.CLOSED=3;var h={write:function(e){return this.send(e)},end:function(e){void 0!==e&&this.send(e),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(e){return!(this.readyState>c.OPEN)&&(e instanceof Buffer||(e=String(e)),this._driver.messages.write(e))},ping:function(e,t){return!(this.readyState>c.OPEN)&&this._driver.ping(e,t)},close:function(e,t){if(void 0===e&&(e=1e3),void 0===t&&(t=""),1e3!==e&&(e<3e3||e>4999))throw new Error("Failed to execute 'close' on WebSocket: The code must be either 1000, or between 3000 and 4999. "+e+" is neither.");this.readyState!==c.CLOSED&&(this.readyState=c.CLOSING),this._driver.close(t,e)},_configureStream:function(){var e=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach(function(t){this._stream.on(t,function(){e._finalizeClose()})},this),this._stream.on("error",function(t){e._emitError("Network error: "+e.url+": "+t.message),e._finalizeClose()})},_open:function(){if(this.readyState===c.CONNECTING){this.readyState=c.OPEN,this.protocol=this._driver.protocol||"";var e=new a("open");e.initEvent("open",!1,!1),this.dispatchEvent(e)}},_receiveMessage:function(e){if(this.readyState>c.OPEN)return!1;this.readable&&this.emit("data",e);var t=new a("message",{data:e});t.initEvent("message",!1,!1),this.dispatchEvent(t)},_emitError:function(e){if(!(this.readyState>=c.CLOSING)){var t=new a("error",{message:e});t.initEvent("error",!1,!1),this.dispatchEvent(t)}},_beginClose:function(e,t){this.readyState!==c.CLOSED&&(this.readyState=c.CLOSING,this._closeParams=[e,t],this._stream&&(this._stream.end(),this._stream.readable||this._finalizeClose()))},_finalizeClose:function(){if(this.readyState!==c.CLOSED){this.readyState=c.CLOSED,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var e=this._closeParams?this._closeParams[0]:"",t=this._closeParams?this._closeParams[1]:1006,n=new a("close",{code:t,reason:e});n.initEvent("close",!1,!1),this.dispatchEvent(n)}}};for(var u in h)c.prototype[u]=h[u];for(var p in o)c.prototype[p]=o[p];e.exports=c},function(e,t){(function(){var e,n,r,i,s={}.hasOwnProperty,o=[].slice;e={LF:"\n",NULL:"\0"},r=function(){var t;function n(e,t,n){this.command=e,this.headers=null!=t?t:{},this.body=null!=n?n:""}return n.prototype.toString=function(){var t,r,i,o,a;for(r in t=[this.command],(i=!1===this.headers["content-length"])&&delete this.headers["content-length"],a=this.headers)s.call(a,r)&&(o=a[r],t.push(r+":"+o));return this.body&&!i&&t.push("content-length:"+n.sizeOfUTF8(this.body)),t.push(e.LF+this.body),t.join(e.LF)},n.sizeOfUTF8=function(e){return e?encodeURI(e).match(/%..|./g).length:0},t=function(t){var r,i,s,o,a,c,h,u,p,d,l,f,_,g,m,v,y;for(o=t.search(RegExp(""+e.LF+e.LF)),s=(a=t.substring(0,o).split(e.LF)).shift(),c={},f=function(e){return e.replace(/^\s+|\s+$/g,"")},_=0,m=(v=a.reverse()).length;_<m;_++)u=(d=v[_]).indexOf(":"),c[f(d.substring(0,u))]=f(d.substring(u+1));if(r="",l=o+2,c["content-length"])p=parseInt(c["content-length"]),r=(""+t).substring(l,l+p);else for(i=null,h=g=l,y=t.length;(l<=y?g<y:g>y)&&(i=t.charAt(h))!==e.NULL;h=l<=y?++g:--g)r+=i;return new n(s,c,r)},n.unmarshall=function(n){var r;return function(){var i,s,o,a;for(a=[],i=0,s=(o=n.split(RegExp(""+e.NULL+e.LF+"*"))).length;i<s;i++)(null!=(r=o[i])?r.length:void 0)>0&&a.push(t(r));return a}()},n.marshall=function(t,r,i){return new n(t,r,i).toString()+e.NULL},n}(),n=function(){var t;function n(e){this.ws=e,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={}}return n.prototype.debug=function(e){var t;return"undefined"!=typeof window&&null!==window&&null!=(t=window.console)?t.log(e):void 0},t=function(){return Date.now?Date.now():(new Date).valueOf},n.prototype._transmit=function(e,t,n){var i;for(i=r.marshall(e,t,n),"function"==typeof this.debug&&this.debug(">>> "+i);;){if(!(i.length>this.maxWebSocketFrameSize))return this.ws.send(i);this.ws.send(i.substring(0,this.maxWebSocketFrameSize)),i=i.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+i.length)}},n.prototype._setupHeartbeat=function(n){var r,s,o,a,c,h;if((c=n.version)===i.VERSIONS.V1_1||c===i.VERSIONS.V1_2)return s=(h=function(){var e,t,r,i;for(i=[],e=0,t=(r=n["heart-beat"].split(",")).length;e<t;e++)a=r[e],i.push(parseInt(a));return i}())[0],r=h[1],0!==this.heartbeat.outgoing&&0!==r&&(o=Math.max(this.heartbeat.outgoing,r),"function"==typeof this.debug&&this.debug("send PING every "+o+"ms"),this.pinger=i.setInterval(o,function(t){return function(){return t.ws.send(e.LF),"function"==typeof t.debug?t.debug(">>> PING"):void 0}}(this))),0!==this.heartbeat.incoming&&0!==s?(o=Math.max(this.heartbeat.incoming,s),"function"==typeof this.debug&&this.debug("check PONG every "+o+"ms"),this.ponger=i.setInterval(o,function(e){return function(){var n;if((n=t()-e.serverActivity)>2*o)return"function"==typeof e.debug&&e.debug("did not receive server activity for the last "+n+"ms"),e.ws.close()}}(this))):void 0},n.prototype._parseConnect=function(){var e,t,n,r;switch(r={},(e=1<=arguments.length?o.call(arguments,0):[]).length){case 2:r=e[0],t=e[1];break;case 3:e[1]instanceof Function?(r=e[0],t=e[1],n=e[2]):(r.login=e[0],r.passcode=e[1],t=e[2]);break;case 4:r.login=e[0],r.passcode=e[1],t=e[2],n=e[3];break;default:r.login=e[0],r.passcode=e[1],t=e[2],n=e[3],r.host=e[4]}return[r,t,n]},n.prototype.connect=function(){var n,s,a,c;return n=1<=arguments.length?o.call(arguments,0):[],c=this._parseConnect.apply(this,n),a=c[0],this.connectCallback=c[1],s=c[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=function(n){return function(i){var o,a,c,h,u,p,d,l,f,_,g,m;if(h="undefined"!=typeof ArrayBuffer&&i.data instanceof ArrayBuffer?(o=new Uint8Array(i.data),"function"==typeof n.debug&&n.debug("--- got data length: "+o.length),function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)a=o[e],n.push(String.fromCharCode(a));return n}().join("")):i.data,n.serverActivity=t(),h!==e.LF){for("function"==typeof n.debug&&n.debug("<<< "+h),m=[],f=0,_=(g=r.unmarshall(h)).length;f<_;f++)switch((u=g[f]).command){case"CONNECTED":"function"==typeof n.debug&&n.debug("connected to server "+u.headers.server),n.connected=!0,n._setupHeartbeat(u.headers),m.push("function"==typeof n.connectCallback?n.connectCallback(u):void 0);break;case"MESSAGE":l=u.headers.subscription,(d=n.subscriptions[l]||n.onreceive)?(c=n,p=u.headers["message-id"],u.ack=function(e){return null==e&&(e={}),c.ack(p,l,e)},u.nack=function(e){return null==e&&(e={}),c.nack(p,l,e)},m.push(d(u))):m.push("function"==typeof n.debug?n.debug("Unhandled received MESSAGE: "+u):void 0);break;case"RECEIPT":m.push("function"==typeof n.onreceipt?n.onreceipt(u):void 0);break;case"ERROR":m.push("function"==typeof s?s(u):void 0);break;default:m.push("function"==typeof n.debug?n.debug("Unhandled frame: "+u):void 0)}return m}"function"==typeof n.debug&&n.debug("<<< PONG")}}(this),this.ws.onclose=function(e){return function(){var t;return t="Whoops! Lost connection to "+e.ws.url,"function"==typeof e.debug&&e.debug(t),e._cleanUp(),"function"==typeof s?s(t):void 0}}(this),this.ws.onopen=function(e){return function(){return"function"==typeof e.debug&&e.debug("Web Socket Opened..."),a["accept-version"]=i.VERSIONS.supportedVersions(),a["heart-beat"]=[e.heartbeat.outgoing,e.heartbeat.incoming].join(","),e._transmit("CONNECT",a)}}(this)},n.prototype.disconnect=function(e,t){return null==t&&(t={}),this._transmit("DISCONNECT",t),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof e?e():void 0},n.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&i.clearInterval(this.pinger),this.ponger)return i.clearInterval(this.ponger)},n.prototype.send=function(e,t,n){return null==t&&(t={}),null==n&&(n=""),t.destination=e,this._transmit("SEND",t,n)},n.prototype.subscribe=function(e,t,n){var r;return null==n&&(n={}),n.id||(n.id="sub-"+this.counter++),n.destination=e,this.subscriptions[n.id]=t,this._transmit("SUBSCRIBE",n),r=this,{id:n.id,unsubscribe:function(){return r.unsubscribe(n.id)}}},n.prototype.unsubscribe=function(e){return delete this.subscriptions[e],this._transmit("UNSUBSCRIBE",{id:e})},n.prototype.begin=function(e){var t,n;return n=e||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:n}),t=this,{id:n,commit:function(){return t.commit(n)},abort:function(){return t.abort(n)}}},n.prototype.commit=function(e){return this._transmit("COMMIT",{transaction:e})},n.prototype.abort=function(e){return this._transmit("ABORT",{transaction:e})},n.prototype.ack=function(e,t,n){return null==n&&(n={}),n["message-id"]=e,n.subscription=t,this._transmit("ACK",n)},n.prototype.nack=function(e,t,n){return null==n&&(n={}),n["message-id"]=e,n.subscription=t,this._transmit("NACK",n)},n}(),i={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(e,t){var r;return null==t&&(t=["v10.stomp","v11.stomp"]),r=new(i.WebSocketClass||WebSocket)(e,t),new n(r)},over:function(e){return new n(e)},Frame:r},void 0!==t&&null!==t&&(t.Stomp=i),"undefined"!=typeof window&&null!==window?(i.setInterval=function(e,t){return window.setInterval(t,e)},i.clearInterval=function(e){return window.clearInterval(e)},window.Stomp=i):t||(self.Stomp=i)}).call(this)},function(e,t,n){"undefined"!=typeof process&&"renderer"===process.type?e.exports=n(43):e.exports=n(45)},function(e,t,n){var r;function i(e){function n(){if(n.enabled){var e=n,i=+new Date,s=i-(r||i);e.diff=s,e.prev=r,e.curr=i,r=i;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var s=o[c];n=i.call(e,s),o.splice(c,1),c--}return n}),t.formatArgs.call(e,o),(n.log||t.log||console.log.bind(console)).apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(44),t.names=[],t.skips=[],t.formatters={}},function(e,t,n){for(var r=n(5),i=n(0),s=n(7),o=n(2).EventEmitter,a=n(15),c=/,\s*/,h=/;\s*/,u=/[\r\n]/g,p=/,\s*/,d=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ",String.fromCharCode(9)],l=[String.fromCharCode(127)],f=0;f<31;f++)l.push(String.fromCharCode(f));var _=/([\x00-\x20\x22\x28\x29\x2c\x2f\x3a-\x3f\x40\x5b-\x5e\x7b\x7d\x7f])/,g=/[^\x21\x23-\x2b\x2d-\x3a\x3c-\x5b\x5d-\x7e]/,m=/^"[^"]*"$/,v=/[\x00-\x20\x3b]/g,y=/[;,] */,b={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",406:"Not Acceptable",407:"Proxy Authorization Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Long",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};function E(e,t,n){o.call(this),this.socket=e,this.httpRequest=t,this.resource=t.url,this.remoteAddress=e.remoteAddress,this.remoteAddresses=[this.remoteAddress],this.serverConfig=n,this._socketIsClosing=!1,this._socketCloseHandler=this._handleSocketCloseBeforeAccept.bind(this),this.socket.on("end",this._socketCloseHandler),this.socket.on("close",this._socketCloseHandler),this._resolved=!1}function S(e){process.nextTick(function(){e.drop(1006,"TCP connection lost before handshake completed.",!0)})}i.inherits(E,o),E.prototype.readHandshake=function(){var e=this,t=this.httpRequest;if(this.resourceURL=s.parse(this.resource,!0),this.host=t.headers.host,!this.host)throw new Error("Client must provide a Host header.");if(this.key=t.headers["sec-websocket-key"],!this.key)throw new Error("Client must provide a value for Sec-WebSocket-Key.");if(this.webSocketVersion=parseInt(t.headers["sec-websocket-version"],10),!this.webSocketVersion||isNaN(this.webSocketVersion))throw new Error("Client must provide a value for Sec-WebSocket-Version.");switch(this.webSocketVersion){case 8:case 13:break;default:var n=new Error("Unsupported websocket client version: "+this.webSocketVersion+"Only versions 8 and 13 are supported.");throw n.httpCode=426,n.headers={"Sec-WebSocket-Version":"13"},n}13===this.webSocketVersion?this.origin=t.headers.origin:8===this.webSocketVersion&&(this.origin=t.headers["sec-websocket-origin"]);var r=t.headers["sec-websocket-protocol"];if(this.protocolFullCaseMap={},this.requestedProtocols=[],r&&r.split(c).forEach(function(t){var n=t.toLocaleLowerCase();e.requestedProtocols.push(n),e.protocolFullCaseMap[n]=t}),!this.serverConfig.ignoreXForwardedFor&&t.headers["x-forwarded-for"]){var i=this.remoteAddress;this.remoteAddresses=t.headers["x-forwarded-for"].split(p),this.remoteAddresses.push(i),this.remoteAddress=this.remoteAddresses[0]}var o=t.headers["sec-websocket-extensions"];this.requestedExtensions=this.parseExtensions(o);var a=t.headers.cookie;this.cookies=this.parseCookies(a)},E.prototype.parseExtensions=function(e){if(!e||0===e.length)return[];var t=e.toLocaleLowerCase().split(c);return t.forEach(function(e,t,n){var r=e.split(h),i=r[0],s=r.slice(1);s.forEach(function(e,t,n){var r=e.split("="),i={name:r[0],value:r[1]};n.splice(t,1,i)});var o={name:i,params:s};n.splice(t,1,o)}),t},E.prototype.parseCookies=function(e){if(!e||"string"!=typeof e)return[];var t=[];return e.split(y).forEach(function(e){var n=e.indexOf("=");if(-1!==n){var r=e.substr(0,n).trim(),i=e.substr(++n,e.length).trim();'"'===i[0]&&(i=i.slice(1,-1)),t.push({name:r,value:decodeURIComponent(i)})}else t.push({name:e,value:null})}),t},E.prototype.accept=function(e,t,n){var i;this._verifyResolution(),e?void 0===(i=this.protocolFullCaseMap[e.toLocaleLowerCase()])&&(i=e):i=e,this.protocolFullCaseMap=null;var s=r.createHash("sha1");s.update(this.key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var o="HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: "+s.digest("base64")+"\r\n";if(i){for(var c=0;c<i.length;c++){var h=i.charCodeAt(c),p=i.charAt(c);if(h<33||h>126||-1!==d.indexOf(p))throw this.reject(500),new Error('Illegal character "'+String.fromCharCode(p)+'" in subprotocol.')}if(-1===this.requestedProtocols.indexOf(e))throw this.reject(500),new Error("Specified protocol was not requested by the client.");i=i.replace(u,""),o+="Sec-WebSocket-Protocol: "+i+"\r\n"}if(this.requestedProtocols=null,t&&(t=t.replace(u,""),13===this.webSocketVersion?o+="Origin: "+t+"\r\n":8===this.webSocketVersion&&(o+="Sec-WebSocket-Origin: "+t+"\r\n")),n){if(!Array.isArray(n))throw this.reject(500),new Error('Value supplied for "cookies" argument must be an array.');var l={};n.forEach(function(e){if(!e.name||!e.value)throw this.reject(500),new Error('Each cookie to set must at least provide a "name" and "value"');if(e.name=e.name.replace(v,""),e.value=e.value.replace(v,""),l[e.name])throw this.reject(500),new Error("You may not specify the same cookie name twice.");l[e.name]=!0;var t=e.name.match(_);if(t)throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie name");if(t=e.value.match(m)?e.value.slice(1,-1).match(g):e.value.match(g))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie value");var n=[e.name+"="+e.value];if(e.path){if(t=e.path.match(v))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie path");n.push("Path="+e.path)}if(e.domain){if("string"!=typeof e.domain)throw this.reject(500),new Error("Domain must be specified and must be a string.");if(t=e.domain.match(v))throw this.reject(500),new Error("Illegal character "+t[0]+" in cookie domain");n.push("Domain="+e.domain.toLowerCase())}if(e.expires){if(!(e.expires instanceof Date))throw this.reject(500),new Error('Value supplied for cookie "expires" must be a vaild date object');n.push("Expires="+e.expires.toGMTString())}if(e.maxage){var r=e.maxage;if("string"==typeof r&&(r=parseInt(r,10)),isNaN(r)||r<=0)throw this.reject(500),new Error('Value supplied for cookie "maxage" must be a non-zero number');r=Math.round(r),n.push("Max-Age="+r.toString(10))}if(e.secure){if("boolean"!=typeof e.secure)throw this.reject(500),new Error('Value supplied for cookie "secure" must be of type boolean');n.push("Secure")}if(e.httponly){if("boolean"!=typeof e.httponly)throw this.reject(500),new Error('Value supplied for cookie "httponly" must be of type boolean');n.push("HttpOnly")}o+="Set-Cookie: "+n.join(";")+"\r\n"}.bind(this))}this._resolved=!0,this.emit("requestResolved",this),o+="\r\n";var f=new a(this.socket,[],e,!1,this.serverConfig);f.webSocketVersion=this.webSocketVersion,f.remoteAddress=this.remoteAddress,f.remoteAddresses=this.remoteAddresses;var y=this;return this._socketIsClosing?S(f):this.socket.write(o,"ascii",function(e){e?S(f):(y._removeSocketCloseListeners(),f._addSocketEventListeners())}),this.emit("requestAccepted",f),f},E.prototype.reject=function(e,t,n){this._verifyResolution(),this._resolved=!0,this.emit("requestResolved",this),"number"!=typeof e&&(e=403);var r="HTTP/1.1 "+e+" "+b[e]+"\r\nConnection: close\r\n";if(t&&(r+="X-WebSocket-Reject-Reason: "+(t=t.replace(u,""))+"\r\n"),n)for(var i in n){var s=n[i].toString().replace(u,"");r+=i.replace(u,"")+": "+s+"\r\n"}r+="\r\n",this.socket.end(r,"ascii"),this.emit("requestRejected",this)},E.prototype._handleSocketCloseBeforeAccept=function(){this._socketIsClosing=!0,this._removeSocketCloseListeners()},E.prototype._removeSocketCloseListeners=function(){this.socket.removeListener("end",this._socketCloseHandler),this.socket.removeListener("close",this._socketCloseHandler)},E.prototype._verifyResolution=function(){if(this._resolved)throw new Error("WebSocketRequest may only be accepted or rejected one time.")},e.exports=E},function(e,t,n){var r=n(47).BufferUtil;const i=1;function s(e,t,n){this.maskBytes=e,this.frameHeader=t,this.config=n,this.maxReceivedFrameSize=n.maxReceivedFrameSize,this.protocolError=!1,this.frameTooLarge=!1,this.invalidCloseFrameLength=!1,this.parseState=i,this.closeStatus=-1}s.prototype.addData=function(e){if(this.parseState===i&&e.length>=2){e.joinInto(this.frameHeader,0,0,2),e.advance(2);var t=this.frameHeader[0],n=this.frameHeader[1];if(this.fin=Boolean(128&t),this.rsv1=Boolean(64&t),this.rsv2=Boolean(32&t),this.rsv3=Boolean(16&t),this.mask=Boolean(128&n),this.opcode=15&t,this.length=127&n,this.opcode>=8){if(this.length>125)return this.protocolError=!0,this.dropReason="Illegal control frame longer than 125 bytes.",!0;if(!this.fin)return this.protocolError=!0,this.dropReason="Control frames must not be fragmented.",!0}126===this.length?this.parseState=2:127===this.length?this.parseState=3:this.parseState=4}if(2===this.parseState)e.length>=2&&(e.joinInto(this.frameHeader,2,0,2),e.advance(2),this.length=this.frameHeader.readUInt16BE(2),this.parseState=4);else if(3===this.parseState&&e.length>=8){e.joinInto(this.frameHeader,2,0,8),e.advance(8);var s=[this.frameHeader.readUInt32BE(2),this.frameHeader.readUInt32BE(6)];if(0!==s[0])return this.protocolError=!0,this.dropReason="Unsupported 64-bit length frame received",!0;this.length=s[1],this.parseState=4}if(4===this.parseState&&(this.mask?e.length>=4&&(e.joinInto(this.maskBytes,0,0,4),e.advance(4),this.parseState=5):this.parseState=5),5===this.parseState){if(this.length>this.maxReceivedFrameSize)return this.frameTooLarge=!0,this.dropReason="Frame size of "+this.length.toString(10)+" bytes exceeds maximum accepted frame size",!0;if(0===this.length)return this.binaryPayload=new Buffer(0),this.parseState=6,!0;if(e.length>=this.length)return this.binaryPayload=e.take(this.length),e.advance(this.length),this.mask&&r.unmask(this.binaryPayload,this.maskBytes),8===this.opcode&&(1===this.length&&(this.binaryPayload=new Buffer(0),this.invalidCloseFrameLength=!0),this.length>=2&&(this.closeStatus=this.binaryPayload.readUInt16BE(0),this.binaryPayload=this.binaryPayload.slice(2))),this.parseState=6,!0}return!1},s.prototype.throwAwayPayload=function(e){return e.length>=this.length&&(e.advance(this.length),this.parseState=6,!0)},s.prototype.toBuffer=function(e){var t,n,i,s=2,o=0,a=0;this.fin&&(o|=128),this.rsv1&&(o|=64),this.rsv2&&(o|=32),this.rsv3&&(o|=16),this.mask&&(a|=128),o|=15&this.opcode,8===this.opcode?(this.length=2,this.binaryPayload&&(this.length+=this.binaryPayload.length),(n=new Buffer(this.length)).writeUInt16BE(this.closeStatus,0),this.length>2&&this.binaryPayload.copy(n,2)):this.binaryPayload?(n=this.binaryPayload,this.length=n.length):this.length=0,this.length<=125?a|=127&this.length:this.length>125&&this.length<=65535?(a|=126,s+=2):this.length>65535&&(a|=127,s+=8);var c=new Buffer(this.length+s+(this.mask?4:0));return c[0]=o,c[1]=a,i=2,this.length>125&&this.length<=65535?(c.writeUInt16BE(this.length,i),i+=2):this.length>65535&&(c.writeUInt32BE(0,i),c.writeUInt32BE(this.length,i+4),i+=8),this.mask?(t=e?0:4294967295*Math.random()>>>0,this.maskBytes.writeUInt32BE(t,0),this.maskBytes.copy(c,i),i+=4,n&&r.mask(n,this.maskBytes,c,i,this.length)):n&&n.copy(c,i),c},s.prototype.toString=function(){return"Opcode: "+this.opcode+", fin: "+this.fin+", length: "+this.length+", hasPayload: "+Boolean(this.binaryPayload)+", masked: "+this.mask},e.exports=s},function(e,t,n){var r=n(8),i=r.extend,s=n(0),o=n(2).EventEmitter,a=n(29),c=n(53),h=n(7),u=n(5),p=n(15),d=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ",String.fromCharCode(9)];function l(e){var t;switch(o.call(this),this.config={maxReceivedFrameSize:1048576,maxReceivedMessageSize:8388608,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,webSocketVersion:13,assembleFragments:!0,disableNagleAlgorithm:!0,closeTimeout:5e3,tlsOptions:{}},e&&(e.tlsOptions?(t=e.tlsOptions,delete e.tlsOptions):t={},i(this.config,e),i(this.config.tlsOptions,t)),this._req=null,this.config.webSocketVersion){case 8:case 13:break;default:throw new Error("Requested webSocketVersion is not supported. Allowed values are 8 and 13.")}}s.inherits(l,o),l.prototype.connect=function(e,t,n,s,o){var u=this;if("string"==typeof t&&(t=t.length>0?[t]:[]),t instanceof Array||(t=[]),this.protocols=t,this.origin=n,this.url="string"==typeof e?h.parse(e):e,!this.url.protocol)throw new Error("You must specify a full WebSocket URL, including protocol.");if(!this.url.host)throw new Error("You must specify a full WebSocket URL, including hostname. Relative URLs are not supported.");this.secure="wss:"===this.url.protocol,this.protocols.forEach(function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t),r=e.charAt(t);if(n<33||n>126||-1!==d.indexOf(r))throw new Error('Protocol list contains invalid character "'+String.fromCharCode(n)+'"')}}),this.url.port||(this.url.port={"ws:":"80","wss:":"443"}[this.url.protocol]);for(var p=new Buffer(16),l=0;l<16;l++)p[l]=Math.round(255*Math.random());this.base64nonce=p.toString("base64");var f=this.url.hostname;("ws:"===this.url.protocol&&"80"!==this.url.port||"wss:"===this.url.protocol&&"443"!==this.url.port)&&(f+=":"+this.url.port);var _,g=s||{};function m(e){u._req=null,u.emit("connectFailed",e)}i(g,{Upgrade:"websocket",Connection:"Upgrade","Sec-WebSocket-Version":this.config.webSocketVersion.toString(10),"Sec-WebSocket-Key":this.base64nonce,Host:g.Host||f}),this.protocols.length>0&&(g["Sec-WebSocket-Protocol"]=this.protocols.join(", ")),this.origin&&(13===this.config.webSocketVersion?g.Origin=this.origin:8===this.config.webSocketVersion&&(g["Sec-WebSocket-Origin"]=this.origin)),_=this.url.pathname?this.url.path:this.url.path?"/"+this.url.path:"/";var v={agent:!1};if(o&&i(v,o),i(v,{hostname:this.url.hostname,port:this.url.port,method:"GET",path:_,headers:g}),this.secure)for(var y in u.config.tlsOptions)u.config.tlsOptions.hasOwnProperty(y)&&(v[y]=u.config.tlsOptions[y]);var b=this._req=(this.secure?c:a).request(v);b.on("upgrade",function(e,t,n){u._req=null,b.removeListener("error",m),u.socket=t,u.response=e,u.firstDataChunk=n,u.validateHandshake()}),b.on("error",m),b.on("response",function(e){if(u._req=null,r.eventEmitterListenerCount(u,"httpResponse")>0)u.emit("httpResponse",e,u),e.socket&&e.socket.end();else{var t=[];for(var n in e.headers)t.push(n+": "+e.headers[n]);u.failHandshake("Server responded with a non-101 status: "+e.statusCode+" "+e.statusMessage+"\nResponse Headers Follow:\n"+t.join("\n")+"\n")}}),b.end()},l.prototype.validateHandshake=function(){var e=this.response.headers;if(this.protocols.length>0){if(this.protocol=e["sec-websocket-protocol"],!this.protocol)return void this.failHandshake("Expected a Sec-WebSocket-Protocol header.");if(-1===this.protocols.indexOf(this.protocol))return void this.failHandshake("Server did not respond with a requested protocol.")}if(e.connection&&"upgrade"===e.connection.toLocaleLowerCase())if(e.upgrade&&"websocket"===e.upgrade.toLocaleLowerCase()){var t=u.createHash("sha1");t.update(this.base64nonce+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var n=t.digest("base64");e["sec-websocket-accept"]?e["sec-websocket-accept"]===n?this.succeedHandshake():this.failHandshake("Sec-WebSocket-Accept header from server didn't match expected value of "+n):this.failHandshake("Expected Sec-WebSocket-Accept header from server")}else this.failHandshake("Expected an Upgrade: websocket header from the server");else this.failHandshake("Expected a Connection: Upgrade header from the server")},l.prototype.failHandshake=function(e){this.socket&&this.socket.writable&&this.socket.end(),this.emit("connectFailed",new Error(e))},l.prototype.succeedHandshake=function(){var e=new p(this.socket,[],this.protocol,!0,this.config);e.webSocketVersion=this.config.webSocketVersion,e._addSocketEventListeners(),this.emit("connect",e),this.firstDataChunk.length>0&&e.handleSocketData(this.firstDataChunk),this.firstDataChunk=null},l.prototype.abort=function(){this._req&&this._req.abort()},e.exports=l},function(e,t){e.exports=require("http")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(66),i=n(75),s=n(80),o=n(83),a=n(86),c=n(89),h=n(92),u=n(95),p=n(98),d=n(101),l=n(104),f=n(107),_=n(110),g=n(111),m=function(){function e(e){this.components=[r.Block,i.Bold,s.Button,c.Headline,h.Image,u.Item,p.Items,d.Link,g.Text,_.Table,l.Row,a.Col,o.Checkbox,f.Submit],this.container=e}return e.prototype.render=function(e,t){var n=this,r=this.getElement(e);return Array.isArray(r)?r.map(function(e){return n.renderElement(e,t)}):this.renderElement(r,t)},e.prototype.renderElement=function(e,t){if(this.container){e.render(this.container,t);var n=document.createElement("div");n.setAttribute("style","clear:both"),this.container.appendChild(n)}},e.prototype.getElement=function(e){var t=Object.create(this.components[e.type.toUpperCase()]);return t.constructor.apply(t,e),t},e}();t.Renderer=m},function(e,t,n){"use strict";var r=n(5),i=n(0),s=n(123),o=n(6),a=n(128),c=n(129),h=function(e,t,n){if(o.apply(this,arguments),this._extensions=new s,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},"string"==typeof this._protocols&&(this._protocols=this._protocols.split(/ *, */)),this._request){var r=this._request.headers["sec-websocket-key"],i=this._request.headers["sec-websocket-protocol"],a=this._request.headers["sec-websocket-version"],c=this._protocols;this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",h.generateAccept(r)),void 0!==i&&("string"==typeof i&&(i=i.split(/ *, */)),this.protocol=i.filter(function(e){return c.indexOf(e)>=0})[0],this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol)),this.version="hybi-"+a}};i.inherits(h,o),h.mask=function(e,t,n){if(!t||0===t.length)return e;n=n||0;for(var r=0,i=e.length-n;r<i;r++)e[n+r]=e[n+r]^t[r%4];return e},h.generateAccept=function(e){var t=r.createHash("sha1");return t.update(e+h.GUID),t.digest("base64")},h.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var u={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(e){return this._extensions.add(e),!0},parse:function(e){this._reader.put(e);for(var t=!0;t;)switch(this._stage){case 0:(t=this._reader.read(1))&&this._parseOpcode(t[0]);break;case 1:(t=this._reader.read(1))&&this._parseLength(t[0]);break;case 2:(t=this._reader.read(this._frame.lengthBytes))&&this._parseExtendedLength(t);break;case 3:(t=this._reader.read(4))&&(this._stage=4,this._frame.maskingKey=t);break;case 4:(t=this._reader.read(this._frame.length))&&(this._stage=0,this._emitFrame(t));break;default:t=null}},text:function(e){return!(this.readyState>1)&&this.frame(e,"text")},binary:function(e){return!(this.readyState>1)&&this.frame(e,"binary")},ping:function(e,t){return!(this.readyState>1)&&(e=e||"",t&&(this._pingCallbacks[e]=t),this.frame(e,"ping"))},pong:function(e){return!(this.readyState>1)&&(e=e||"",this.frame(e,"pong"))},close:function(e,t){return e=e||"",t=t||this.ERRORS.normal_closure,this.readyState<=0?(this.readyState=3,this.emit("close",new o.CloseEvent(t,e)),!0):1===this.readyState&&(this.readyState=2,this._extensions.close(function(){this.frame(e,"close",t)},this),!0)},frame:function(e,t,n){if(this.readyState<=0)return this._queue([e,t,n]);if(this.readyState>2)return!1;e instanceof Array&&(e=new Buffer(e)),"number"==typeof e&&(e=e.toString());var i,s,o=new c,h="string"==typeof e;o.rsv1=o.rsv2=o.rsv3=!1,o.opcode=this.OPCODES[t||(h?"text":"binary")],i=h?new Buffer(e,"utf8"):e,n&&(s=i,(i=new Buffer(2+s.length)).writeUInt16BE(n,0),s.copy(i,2)),o.data=i;var u=function(e){var t=new a;t.final=!0,t.rsv1=e.rsv1,t.rsv2=e.rsv2,t.rsv3=e.rsv3,t.opcode=e.opcode,t.masked=!!this._masking,t.length=e.data.length,t.payload=e.data,t.masked&&(t.maskingKey=r.randomBytes(4)),this._sendFrame(t)};return this.MESSAGE_OPCODES.indexOf(o.opcode)>=0?this._extensions.processOutgoingMessage(o,function(e,t){if(e)return this._fail("extension_error",e.message);u.call(this,t)},this):u.call(this,o),!0},_sendFrame:function(e){var t=e.length,n=t<=125?2:t<=65535?4:10,r=n+(e.masked?4:0),i=new Buffer(r+t),s=e.masked?this.MASK:0;i[0]=(e.final?this.FIN:0)|(e.rsv1?this.RSV1:0)|(e.rsv2?this.RSV2:0)|(e.rsv3?this.RSV3:0)|e.opcode,t<=125?i[1]=s|t:t<=65535?(i[1]=126|s,i.writeUInt16BE(t,2)):(i[1]=127|s,i.writeUInt32BE(Math.floor(t/4294967296),2),i.writeUInt32BE(t%4294967296,6)),e.payload.copy(i,r),e.masked&&(e.maskingKey.copy(i,n),h.mask(i,e.maskingKey,r)),this._write(i)},_handshakeResponse:function(){try{var e=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"])}catch(e){return this._fail("protocol_error",e.message)}e&&this._headers.set("Sec-WebSocket-Extensions",e);var t=["HTTP/1.1 101 Switching Protocols",this._headers.toString(),""];return new Buffer(t.join("\r\n"),"utf8")},_shutdown:function(e,t,n){delete this._frame,delete this._message,this._stage=5;var r=1===this.readyState;this.readyState=2,this._extensions.close(function(){r&&this.frame(t,"close",e),this.readyState=3,n&&this.emit("error",new Error(t)),this.emit("close",new o.CloseEvent(e,t))},this)},_fail:function(e,t){this.readyState>1||this._shutdown(this.ERRORS[e],t,!0)},_parseOpcode:function(e){var t=[this.RSV1,this.RSV2,this.RSV3].map(function(t){return(e&t)===t}),n=this._frame=new a;return n.final=(e&this.FIN)===this.FIN,n.rsv1=t[0],n.rsv2=t[1],n.rsv3=t[2],n.opcode=e&this.OPCODE,this._stage=1,this._extensions.validFrameRsv(n)?this.OPCODE_CODES.indexOf(n.opcode)<0?this._fail("protocol_error","Unrecognized frame opcode: "+n.opcode):this.MESSAGE_OPCODES.indexOf(n.opcode)<0&&!n.final?this._fail("protocol_error","Received fragmented control frame: opcode = "+n.opcode):this._message&&this.OPENING_OPCODES.indexOf(n.opcode)>=0?this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished"):void 0:this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(n.rsv1?1:0)+", reserved2 = "+(n.rsv2?1:0)+", reserved3 = "+(n.rsv3?1:0))},_parseLength:function(e){var t=this._frame;if(t.masked=(e&this.MASK)===this.MASK,t.length=e&this.LENGTH,t.length>=0&&t.length<=125){if(this._stage=t.masked?3:4,!this._checkFrameLength())return}else this._stage=2,t.lengthBytes=126===t.length?2:8;if(this._requireMasking&&!t.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(e){var t=this._frame;if(t.length=this._readUInt(e),this._stage=t.masked?3:4,this.MESSAGE_OPCODES.indexOf(t.opcode)<0&&t.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+t.length);this._checkFrameLength()},_checkFrameLength:function(){return!((this._message?this._message.length:0)+this._frame.length>this._maxLength&&(this._fail("too_large","WebSocket frame length too large"),1))},_emitFrame:function(e){var t,n,r,i,s,a=this._frame,u=a.payload=h.mask(e,a.maskingKey),p=a.opcode;if(delete this._frame,p===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(a)}if(p!==this.OPCODES.text&&p!==this.OPCODES.binary||(this._message=new c,this._message.pushFrame(a)),a.final&&this.MESSAGE_OPCODES.indexOf(p)>=0)return this._emitMessage(this._message);p===this.OPCODES.close&&(n=u.length>=2?u.readUInt16BE(0):null,r=u.length>2?this._encode(u.slice(2)):null,0!==u.length&&!(null!==n&&n>=this.MIN_RESERVED_ERROR&&n<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(n)<0&&(n=this.ERRORS.protocol_error),(u.length>125||u.length>2&&!r)&&(n=this.ERRORS.protocol_error),this._shutdown(n||this.DEFAULT_ERROR_CODE,r||"")),p===this.OPCODES.ping&&(this.frame(u,"pong"),this.emit("ping",new o.PingEvent(u.toString()))),p===this.OPCODES.pong&&(s=(i=this._pingCallbacks)[t=this._encode(u)],delete i[t],s&&s(),this.emit("pong",new o.PongEvent(u.toString())))},_emitMessage:function(e){(e=this._message).read(),delete this._message,this._extensions.processIncomingMessage(e,function(e,t){if(e)return this._fail("extension_error",e.message);var n=t.data;if(t.opcode===this.OPCODES.text&&(n=this._encode(n)),null===n)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new o.MessageEvent(n))},this)},_encode:function(e){try{var t=e.toString("binary",0,e.length);if(!this.UTF8_MATCH.test(t))return null}catch(e){}return e.toString("utf8",0,e.length)},_readUInt:function(e){return 2===e.length?e.readUInt16BE(0):4294967296*e.readUInt32BE(0)+e.readUInt32BE(4)}};for(var p in u)h.prototype[p]=u[p];e.exports=h},function(e,t,n){"use strict";var r=function(e){this._bufferSize=e,this.clear()};r.prototype.clear=function(){this._buffer=new Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0},r.prototype.push=function(e){var t=!1,n=!1;this._ringSize<this._bufferSize?t=0===this._tail:this._ringOffset===this._ringSize&&(t=!0,n=0===this._tail),t&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(new Array(this._bufferSize)),this._bufferSize=this._buffer.length,n&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=e,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize},r.prototype.peek=function(){if(0!==this.length)return this._buffer[this._head]},r.prototype.shift=function(){if(0!==this.length){var e=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,0===this._ringOffset&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,e}},e.exports=r},function(e,t,n){"use strict";var r=n(32),i=function(){this._complete=!1,this._callbacks=new r(i.QUEUE_SIZE)};i.QUEUE_SIZE=4,i.all=function(e){var t=new i,n=e.length,r=n;for(0===n&&t.done();r--;)e[r].then(function(){0==(n-=1)&&t.done()});return t},i.prototype.then=function(e){this._complete?e():this._callbacks.push(e)},i.prototype.done=function(){this._complete=!0;for(var e,t=this._callbacks;e=t.shift();)e()},e.exports=i},function(e,t,n){"use strict";var r=n(6),i=function(e,t,n){r.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)};n(0).inherits(i,r);var s={close:function(){return 3!==this.readyState&&(this.readyState=3,this.emit("close",new r.CloseEvent(null,null)),!0)},parse:function(e){this.readyState>1||(this._reader.put(e),this._reader.eachByte(function(e){var t;switch(this._stage){case-1:this._body.push(e),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(e);break;case 1:if(this._length=(127&e)+128*this._length,this._closing&&0===this._length)return this.close();128!=(128&e)&&(0===this._length?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(255===e)this._stage=0,t=new Buffer(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new r.MessageEvent(t));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(e),this._buffer.length>this._maxLength)return this.close()}},this))},frame:function(e){if(0===this.readyState)return this._queue([e]);if(this.readyState>1)return!1;"string"!=typeof e&&(e=e.toString());var t=new Buffer(e,"utf8"),n=new Buffer(t.length+2);return n[0]=0,n[t.length+1]=255,t.copy(n,1),this._write(n),!0},_handshakeResponse:function(){var e=["HTTP/1.1 101 Web Socket Protocol Handshake",this._headers.toString(),""];return new Buffer(e.join("\r\n"),"utf8")},_parseLeadingByte:function(e){128==(128&e)?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(var o in s)i.prototype[o]=s[o];e.exports=i},function(e,t,n){var r=n(12),i={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(e,t,n){this.on(e,t)},removeEventListener:function(e,t,n){this.removeListener(e,t)},dispatchEvent:function(e){e.target=e.currentTarget=this,e.eventPhase=r.AT_TARGET,this["on"+e.type]&&this["on"+e.type](e),this.emit(e.type,e)}};e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37);n(145),t.default=r.GaiaChannel},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(38),i=n(65),s=n(30),o=function(){function e(e,t){void 0===t&&(t=new i.Emitter),this.sockJS=n(112),this.emitter=t,this.renderer=new s.Renderer(e)}return e.getSessionId=function(e){var t=/\/([^\/]+)\/websocket/.exec(e.websocket.ws._transport.url);return t?t[1]:null},e.prototype.connect=function(e,t){var n=this;return void 0===this.websocket?(localStorage.setItem("gaia.url",e),localStorage.setItem("gaia.idt",t),new Promise(function(i,s){n.emitter.onConnecting(e,t),n.websocket=r.default.over(n.sockJS(e)),n.websocket.debug=function(){};var o={};o["gaia.uid"]=localStorage.getItem("gaia.uid"),o["gaia.sig"]=localStorage.getItem("gaia.sig"),o["gaia.idt"]=localStorage.getItem("gaia.idt"),n.websocket.connect(o,n.onOpen(n,i),n.onError(n,s))})):Promise.resolve(t)},e.prototype.disconnect=function(){var e=this;return void 0!==this.websocket?new Promise(function(t){e.websocket.disconnect(function(){var n=localStorage.getItem("gaia.url"),r=localStorage.getItem("gaia.idt");e.emitter.onDisconnected(n,r),t()})}):Promise.resolve()},e.prototype.sendMessage=function(t){try{document.getElementsByClassName("button.left").item(0).remove();var n=Object.assign(t,{position:"right",timestamp:(new Date).getTime()});return this.websocket.send("/app/"+e.getSessionId(this),{identity:localStorage.getItem("gaia.idt")},JSON.stringify(n)),this.renderer.render(n,null),Promise.resolve(t)}catch(e){return this.onError(this)(e),Promise.reject(e)}},e.prototype.onOpen=function(t,n){var r=this;return function(i){var s=localStorage.getItem("gaia.url"),o=localStorage.getItem("gaia.idt");t.websocket.subscribe("/queue/"+e.getSessionId(t),r.onMessage(t),{identity:o}),t.emitter.onConnected(s,o),n()}},e.prototype.onError=function(e,t){return function(n){t&&t(),e.emitter.onError(n),setTimeout(function(){var t=localStorage.getItem("gaia.url"),n=localStorage.getItem("gaia.idt");e.emitter.onReconnecting(t,n),e.connect(t,n)},5e3)}},e.prototype.onMessage=function(e){var t=this;return function(n){var r=JSON.parse(n.body);r.type?(e.emitter.onMessage(Object.assign(r,{position:"left"})),e.renderer.render(Object.assign(r,{position:"left"}),t.sendMessage.bind(t))):r.uid&&r.sig&&(e.emitter.onMessage(r),localStorage.setItem("gaia.uid",r.uid),localStorage.setItem("gaia.sig",r.sig))}},e}();t.GaiaChannel=o},function(e,t,n){var r=n(23),i=n(39);e.exports=r.Stomp,e.exports.overTCP=i.overTCP,e.exports.overWS=i.overWS},function(e,t,n){(function(){var e,r,i,s,o,a;e=n(23),r=n(13),e.Stomp.setInterval=function(e,t){return setInterval(t,e)},e.Stomp.clearInterval=function(e){return clearInterval(e)},o=function(e,t){var n,i;return n=null,i={url:"tcp:// "+t+":"+e,send:function(e){return n.write(e)},close:function(){return n.end()}},(n=r.connect(e,t,function(e){return i.onopen()})).on("error",function(e){return"function"==typeof i.onclose?i.onclose(e):void 0}),n.on("close",function(e){return"function"==typeof i.onclose?i.onclose(e):void 0}),n.on("data",function(e){var t;return t={data:e.toString()},i.onmessage(t)}),i},a=function(e){var t,r,i,s;return t=n(40).client,r=null,s={url:e,send:function(e){return r.sendUTF(e)},close:function(){return r.close()}},(i=new t).on("connect",function(e){return r=e,s.onopen(),r.on("error",function(e){return"function"==typeof s.onclose?s.onclose(e):void 0}),r.on("close",function(){return"function"==typeof s.onclose?s.onclose():void 0}),r.on("message",function(e){var t;if("utf8"===e.type)return t={data:e.utf8Data},s.onmessage(t)})}),i.connect(e),s},i=function(t,n){var r;return r=o(n,t),e.Stomp.over(r)},s=function(t){var n;return n=a(t),e.Stomp.over(n)},t.overTCP=i,t.overWS=s}).call(this)},function(e,t,n){e.exports=n(41)},function(e,t,n){e.exports={server:n(42),client:n(28),router:n(54),frame:n(27),request:n(26),connection:n(15),w3cwebsocket:n(56),deprecation:n(62),version:n(63)}},function(e,t,n){var r=n(8).extend,i=n(8),s=n(0),o=n(24)("websocket:server"),a=n(2).EventEmitter,c=n(26),h=function(e){a.call(this),this._handlers={upgrade:this.handleUpgrade.bind(this),requestAccepted:this.handleRequestAccepted.bind(this),requestResolved:this.handleRequestResolved.bind(this)},this.connections=[],this.pendingRequests=[],e&&this.mount(e)};s.inherits(h,a),h.prototype.mount=function(e){if(this.config={httpServer:null,maxReceivedFrameSize:65536,maxReceivedMessageSize:1048576,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,keepalive:!0,keepaliveInterval:2e4,dropConnectionOnKeepaliveTimeout:!0,keepaliveGracePeriod:1e4,useNativeKeepalive:!1,assembleFragments:!0,autoAcceptConnections:!1,ignoreXForwardedFor:!1,disableNagleAlgorithm:!0,closeTimeout:5e3},r(this.config,e),!this.config.httpServer)throw new Error("You must specify an httpServer on which to mount the WebSocket server.");Array.isArray(this.config.httpServer)||(this.config.httpServer=[this.config.httpServer]);var t=this._handlers.upgrade;this.config.httpServer.forEach(function(e){e.on("upgrade",t)})},h.prototype.unmount=function(){var e=this._handlers.upgrade;this.config.httpServer.forEach(function(t){t.removeListener("upgrade",e)})},h.prototype.closeAllConnections=function(){this.connections.forEach(function(e){e.close()}),this.pendingRequests.forEach(function(e){process.nextTick(function(){e.reject(503)})})},h.prototype.broadcast=function(e){Buffer.isBuffer(e)?this.broadcastBytes(e):"function"==typeof e.toString&&this.broadcastUTF(e)},h.prototype.broadcastUTF=function(e){this.connections.forEach(function(t){t.sendUTF(e)})},h.prototype.broadcastBytes=function(e){this.connections.forEach(function(t){t.sendBytes(e)})},h.prototype.shutDown=function(){this.unmount(),this.closeAllConnections()},h.prototype.handleUpgrade=function(e,t){var n=new c(t,e,this.config);try{n.readHandshake()}catch(e){return n.reject(e.httpCode?e.httpCode:400,e.message,e.headers),void o("Invalid handshake: %s",e.message)}this.pendingRequests.push(n),n.once("requestAccepted",this._handlers.requestAccepted),n.once("requestResolved",this._handlers.requestResolved),!this.config.autoAcceptConnections&&i.eventEmitterListenerCount(this,"request")>0?this.emit("request",n):this.config.autoAcceptConnections?n.accept(n.requestedProtocols[0],n.origin):n.reject(404,"No handler is configured to accept the connection.")},h.prototype.handleRequestAccepted=function(e){var t=this;e.once("close",function(n,r){t.handleConnectionClose(e,n,r)}),this.connections.push(e),this.emit("connect",e)},h.prototype.handleConnectionClose=function(e,t,n){var r=this.connections.indexOf(e);-1!==r&&this.connections.splice(r,1),this.emit("close",e,t,n)},h.prototype.handleRequestResolved=function(e){var t=this.pendingRequests.indexOf(e);-1!==t&&this.pendingRequests.splice(t,1)},e.exports=h},function(e,t,n){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(25)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(s=++i)}),e.splice(s,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},function(e,t){var n=1e3,r=6e4,i=36e5,s=24*i;function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===a&&!1===isNaN(e))return t.long?function(e){return o(e,s,"day")||o(e,i,"hour")||o(e,r,"minute")||o(e,n,"second")||e+" ms"}(e):function(e){return e>=s?Math.round(e/s)+"d":e>=i?Math.round(e/i)+"h":e>=r?Math.round(e/r)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var r=n(46),i=n(0);(t=e.exports=n(25)).init=function(e){e.inspectOpts={};for(var n=Object.keys(t.inspectOpts),r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(){return o.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function(e){var n=this.namespace;if(this.useColors){var r=this.color,i="  [3"+r+";1m"+n+" [0m";e[0]=i+e[0].split("\n").join("\n"+i),e.push("[3"+r+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+n+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=a,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(s)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e},{});var s=parseInt(process.env.DEBUG_FD,10)||2;1!==s&&2!==s&&i.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var o=1===s?process.stdout:2===s?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new r.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":(t=new(n(14).SyncWriteStream)(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":(t=new(n(13).Socket)({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(s);function a(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map(function(e){return e.trim()}).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)},t.enable(a())},function(e,t){e.exports=require("tty")},function(e,t,n){
/*!
 * Copied from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
try{e.exports=n(!function(){var e=new Error("Cannot find module '../build/Release/bufferutil'");throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=n(!function(){var e=new Error("Cannot find module '../build/default/bufferutil'");throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=n(48)}catch(e){throw console.error("bufferutil.node seems to not have been built. Run npm install."),e}}}},function(e,t){
/*!
 * Copied from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
e.exports.BufferUtil={merge:function(e,t){for(var n=0,r=0,i=t.length;r<i;++r){var s=t[r];s.copy(e,n),n+=s.length}},mask:function(e,t,n,r,i){for(var s=t.readUInt32LE(0),o=0;o<i-3;o+=4){var a=s^e.readUInt32LE(o);a<0&&(a=4294967296+a),n.writeUInt32LE(a,r+o)}switch(i%4){case 3:n[r+o+2]=e[o+2]^t[2];case 2:n[r+o+1]=e[o+1]^t[1];case 1:n[r+o]=e[o]^t[0]}},unmask:function(e,t){for(var n=t.readUInt32LE(0),r=e.length,i=0;i<r-3;i+=4){var s=n^e.readUInt32LE(i);s<0&&(s=4294967296+s),e.writeUInt32LE(s,i)}switch(r%4){case 3:e[i+2]=e[i+2]^t[2];case 2:e[i+1]=e[i+1]^t[1];case 1:e[i]=e[i]^t[0]}}}},function(e,t,n){var r=n(50).Buffer,i=n(2).EventEmitter;function s(e){if(!(this instanceof s))return new s(e);i.call(this);var t=this;void 0===e&&(e={}),t.encoding=e.encoding,t.construct=e.construct||r;var n={next:null,buffer:null},o={next:null,buffer:null},a=0;t.__defineGetter__("length",function(){return a});var c=0;t.write=function(e){return n.buffer?(o.next={next:null,buffer:e},o=o.next):(n.buffer=e,o=n),a+=e.length,t.emit("write",e),!0},t.end=function(e){r.isBuffer(e)&&t.write(e)},t.push=function(){return[].concat.apply([],arguments).forEach(t.write),t},t.forEach=function(e){if(!n.buffer)return new t.construct(0);if(n.buffer.length-c<=0)return t;for(var r={buffer:n.buffer.slice(c),next:n.next};r&&r.buffer&&!e(r.buffer);)r=r.next;return t},t.join=function(e,r){if(!n.buffer)return new t.construct(0);void 0==e&&(e=0),void 0==r&&(r=t.length);var i=new t.construct(r-e),s=0;return t.forEach(function(t){if(e<s+t.length&&s<r&&t.copy(i,Math.max(0,s-e),Math.max(0,e-s),Math.min(t.length,r-s)),(s+=t.length)>r)return!0}),i},t.joinInto=function(e,r,i,s){if(!n.buffer)return new t.construct(0);void 0==i&&(i=0),void 0==s&&(s=t.length);var o=e;if(o.length-r<s-i)throw new Error("Insufficient space available in target Buffer.");var a=0;return t.forEach(function(e){if(i<a+e.length&&a<s&&e.copy(o,Math.max(r,r+a-i),Math.max(0,i-a),Math.min(e.length,s-a)),(a+=e.length)>s)return!0}),o},t.advance=function(e){for(c+=e,a-=e;n.buffer&&c>=n.buffer.length;)c-=n.buffer.length,n=n.next?n.next:{buffer:null,next:null};return null===n.buffer&&(o={next:null,buffer:null}),t.emit("advance",e),t},t.take=function(e,n){if(void 0==e?e=t.length:"number"!=typeof e&&(n=e,e=t.length),n||(n=t.encoding),n){var r="";return t.forEach(function(t){if(e<=0)return!0;r+=t.toString(n,0,Math.min(e,t.length)),e-=t.length}),r}return t.join(0,e)},t.toString=function(){return t.take("binary")}}e.exports=s,e.exports.BufferList=s,n(0).inherits(s,i)},function(e,t){e.exports=require("buffer")},function(e,t,n){
/*!
 * UTF-8 Validation Code originally from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
try{e.exports=n(!function(){var e=new Error("Cannot find module '../build/Release/validation'");throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=n(!function(){var e=new Error("Cannot find module '../build/default/validation'");throw e.code="MODULE_NOT_FOUND",e}())}catch(t){try{e.exports=n(52)}catch(e){throw console.error("validation.node seems not to have been built. Run npm install."),e}}}},function(e,t){
/*!
 * UTF-8 Validation Fallback Code originally from:
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
e.exports.Validation={isValidUTF8:function(){return!0}}},function(e,t){e.exports=require("https")},function(e,t,n){var r=n(8).extend,i=n(0),s=n(2).EventEmitter,o=n(55);function a(e){s.call(this),this.config={server:null},e&&r(this.config,e),this.handlers=[],this._requestHandler=this.handleRequest.bind(this),this.config.server&&this.attachServer(this.config.server)}i.inherits(a,s),a.prototype.attachServer=function(e){if(!e)throw new Error("You must specify a WebSocketServer instance to attach to.");this.server=e,this.server.on("request",this._requestHandler)},a.prototype.detachServer=function(){if(!this.server)throw new Error("Cannot detach from server: not attached.");this.server.removeListener("request",this._requestHandler),this.server=null},a.prototype.mount=function(e,t,n){if(!e)throw new Error("You must specify a path for this handler.");if(t||(t="____no_protocol____"),!n)throw new Error("You must specify a callback for this handler.");if(!((e=this.pathToRegExp(e))instanceof RegExp))throw new Error("Path must be specified as either a string or a RegExp.");var r=e.toString();if(t=t.toLocaleLowerCase(),-1!==this.findHandlerIndex(r,t))throw new Error("You may only mount one handler per path/protocol combination.");this.handlers.push({path:e,pathString:r,protocol:t,callback:n})},a.prototype.unmount=function(e,t){var n=this.findHandlerIndex(this.pathToRegExp(e).toString(),t);if(-1===n)throw new Error("Unable to find a route matching the specified path and protocol.");this.handlers.splice(n,1)},a.prototype.findHandlerIndex=function(e,t){t=t.toLocaleLowerCase();for(var n=0,r=this.handlers.length;n<r;n++){var i=this.handlers[n];if(i.pathString===e&&i.protocol===t)return n}return-1},a.prototype.pathToRegExp=function(e){return"string"==typeof e&&("*"===e?e=/^.*$/:(e=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),e=new RegExp("^"+e+"$"))),e},a.prototype.handleRequest=function(e){var t=e.requestedProtocols;0===t.length&&(t=["____no_protocol____"]);for(var n=0;n<t.length;n++)for(var r=t[n].toLocaleLowerCase(),i=0,s=this.handlers.length;i<s;i++){var a=this.handlers[i];if(a.path.test(e.resourceURL.pathname)&&(r===a.protocol||"*"===a.protocol)){var c=new o(e,r);return void a.callback(c)}}e.reject(404,"No handler is available for the given request.")},e.exports=a},function(e,t,n){var r=n(0),i=n(2).EventEmitter;function s(e,t){i.call(this),this.webSocketRequest=e,this.protocol="____no_protocol____"===t?null:t,this.origin=e.origin,this.resource=e.resource,this.resourceURL=e.resourceURL,this.httpRequest=e.httpRequest,this.remoteAddress=e.remoteAddress,this.webSocketVersion=e.webSocketVersion,this.requestedExtensions=e.requestedExtensions,this.cookies=e.cookies}r.inherits(s,i),s.prototype.accept=function(e,t){var n=this.webSocketRequest.accept(this.protocol,e,t);return this.emit("requestAccepted",n),n},s.prototype.reject=function(e,t,n){this.webSocketRequest.reject(e,t,n),this.emit("requestRejected",this)},e.exports=s},function(e,t,n){var r=n(28),i=n(57),s=n(59);const o=0,a=1,c=2,h=3;function u(e,t,n,i,c,u){s.EventTarget.call(this),(u=u||{}).assembleFragments=!0;var _=this;this._url=e,this._readyState=o,this._protocol=void 0,this._extensions="",this._bufferedAmount=0,this._binaryType="arraybuffer",this._connection=void 0,this._client=new r(u),this._client.on("connect",function(e){(function(e){var t=this;this._readyState=a,this._connection=e,this._protocol=e.protocol,this._extensions=e.extensions,this._connection.on("close",function(e,n){(function(e,t){f.call(this),this._readyState=h,this.dispatchEvent(p(e,t||""))}).call(t,e,n)}),this._connection.on("message",function(e){(function(e){if(e.utf8Data)this.dispatchEvent(d(e.utf8Data));else if(e.binaryData&&"arraybuffer"===this.binaryType){for(var t=e.binaryData,n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0,s=t.length;i<s;++i)r[i]=t[i];this.dispatchEvent(d(n))}}).call(t,e)}),this.dispatchEvent(new s.Event("open"))}).call(_,e)}),this._client.on("connectFailed",function(){l.call(_)}),this._client.connect(e,t,n,i,c)}function p(e,t){var n=new s.Event("close");return n.code=e,n.reason=t,n.wasClean=void 0===e||1e3===e,n}function d(e){var t=new s.Event("message");return t.data=e,t}function l(){f.call(this),this._readyState=h;try{this.dispatchEvent(new s.Event("error"))}finally{this.dispatchEvent(p(1006,"connection failed"))}}function f(){this._client.removeAllListeners(),this._connection&&this._connection.removeAllListeners()}e.exports=u,Object.defineProperties(u.prototype,{url:{get:function(){return this._url}},readyState:{get:function(){return this._readyState}},protocol:{get:function(){return this._protocol}},extensions:{get:function(){return this._extensions}},bufferedAmount:{get:function(){return this._bufferedAmount}}}),Object.defineProperties(u.prototype,{binaryType:{get:function(){return this._binaryType},set:function(e){if("arraybuffer"!==e)throw new SyntaxError('just "arraybuffer" type allowed for "binaryType" attribute');this._binaryType=e}}}),[["CONNECTING",o],["OPEN",a],["CLOSING",c],["CLOSED",h]].forEach(function(e){Object.defineProperty(u.prototype,e[0],{get:function(){return e[1]}})}),[["CONNECTING",o],["OPEN",a],["CLOSING",c],["CLOSED",h]].forEach(function(e){Object.defineProperty(u,e[0],{get:function(){return e[1]}})}),u.prototype.send=function(e){if(this._readyState!==a)throw new Error("cannot call send() while not connected");if("string"==typeof e||e instanceof String)this._connection.sendUTF(e);else if(e instanceof Buffer)this._connection.sendBytes(e);else{if(!e.byteLength&&0!==e.byteLength)throw new Error("unknown binary data:",e);e=i(e),this._connection.sendBytes(e)}},u.prototype.close=function(e,t){switch(this._readyState){case o:l.call(this),this._client.on("connect",function(n){e?n.close(e,t):n.close()});break;case a:this._readyState=c,e?this._connection.close(e,t):this._connection.close()}}},function(e,t,n){var r=n(58).strict;e.exports=function(e){if(r(e)){var t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return Buffer.from(e)}},function(e,t){e.exports=i,i.strict=s,i.loose=o;var n=Object.prototype.toString,r={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function i(e){return s(e)||o(e)}function s(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function o(e){return r[n.call(e)]}},function(e,t,n){e.exports={EventTarget:n(60),Event:n(61)}},function(e,t){function n(){"function"!=typeof this.addEventListener&&(this._listeners={},this.addEventListener=r,this.removeEventListener=i,this.dispatchEvent=s)}function r(e,t){var n,r,i;if(e&&t){for(void 0===(n=this._listeners[e])&&(this._listeners[e]=n=[]),r=0;i=n[r];r++)if(i===t)return;n.push(t)}}function i(e,t){var n,r,i;if(e&&t&&void 0!==(n=this._listeners[e])){for(r=0;i=n[r];r++)if(i===t){n.splice(r,1);break}0===n.length&&delete this._listeners[e]}}function s(e){var t,n,r,i,s,o=!1;if(!e||"string"!=typeof e.type)throw new Error("`event` must have a valid `type` property");e._yaeti&&(e.target=this,e.cancelable=!0);try{e.stopImmediatePropagation=function(){o=!0}}catch(e){}for(t=e.type,n=this._listeners[t]||[],"function"==typeof(r=this["on"+t])&&r.call(this,e),i=0;(s=n[i])&&!o;i++)s.call(this,e);return!e.defaultPrevented}e.exports=n,Object.defineProperties(n.prototype,{listeners:{get:function(){return this._listeners}}})},function(e,t){e.exports=function(e){this.type=e,this.isTrusted=!1,this._yaeti=!0}},function(e,t){var n={disableWarnings:!1,deprecationWarningMap:{},warn:function(e){!this.disableWarnings&&this.deprecationWarningMap[e]&&(console.warn("DEPRECATION WARNING: "+this.deprecationWarningMap[e]),this.deprecationWarningMap[e]=!1)}};e.exports=n},function(e,t,n){e.exports=n(64).version},function(e){e.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <brian@worlize.com> (https://www.worlize.com/)",contributors:["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.26",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=0.10.0"},dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.0.1"},config:{verbose:!1},scripts:{install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.onConnecting=function(e,t){return"connecting to url "+e+" for identity "+t},e.prototype.onConnected=function(e,t){return"connected to url "+e+" for identity "+t},e.prototype.onDisconnecting=function(e,t){return"disconnecting from url "+e+" for identity "+t},e.prototype.onDisconnected=function(e,t){return"disconnected from url "+e+" for identity "+t},e.prototype.onReconnecting=function(e,t){return"reconnecting to url "+e+" for identity "+t},e.prototype.onError=function(e){return e},e.prototype.onMessage=function(e){return e},e}();t.Emitter=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),s=n(17),o=n(1);n(71),n(18),n(19);var a=function(e){function t(t){var n=e.call(this,name)||this;return n.name="BLOCK",n.message=t,n.position=t.position,n}return r(t,e),t.prototype.render=function(e,n){var r=this.position||"left",o=document.createElement("div");o.classList.add("block"),o.classList.add(r),o.appendChild(s.TextTime.render()),t.renderElements(o,this.message,n),e.appendChild(new i.TextIcon(r).render()),e.appendChild(o)},t}(o.MarkupComponent);t.Block=a},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(4);n(78);var s=function(e){function t(t){var n=e.call(this,name)||this;return n.name="BOLD",n.text=t.text,n}return r(t,e),t.prototype.render=function(e){var t=document.createElement("b");t.classList.add("bold"),t.appendChild(new i.InlineText(this.text).render()),e.appendChild(t)},t}(n(1).MarkupComponent);t.Bold=s},function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(1);n(81),n(18),n(19);var o=function(e){function t(t){var n=e.call(this,name)||this;return n.name="BUTTON",n.text=t.text,n.buttonName=t.name,n.value=t.value,n.position=t.position,n}return r(t,e),t.isNested=function(e){return e.hasClass("block")||"TD"===e.prop("tagName")},t.prototype.render=function(e,n){var r=this.position||"left",s=document.createElement("button");s.setAttribute("name",this.buttonName),t.isNested(e)?s.classList.add("button-nested",r):s.classList.add("button",r),s.appendChild(new i.InlineText(this.text).render()),e.appendChild(s);var o=this.text,a=this.buttonName,c=this.value;s.addEventListener("click",function(){n({type:"button",text:o,name:a,value:c})})},t}(s.MarkupComponent);t.Button=o},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);n(84);var i=function(){function e(e){this.name="CHECKBOX",this.text=e.text,this.value=e.value,this.position=e.position}return e.prototype.render=function(e){var t=this.position||"left",n=document.createElement("input");n.classList.add("checkbox",t),n.setAttribute("type","checkbox"),n.setAttribute("name",this.name),n.appendChild(new r.InlineText(this.text).render()),e.appendChild(n)},e}();t.Checkbox=i},function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);n(87);var s=function(e){function t(t){var n=e.call(this,name)||this;return n.name="COL",n.message=t,n}return r(t,e),t.prototype.render=function(e,n){var r=document.createElement("td");r.classList.add("col"),t.renderElements(r,this.message,n),e.appendChild(r)},t}(i.MarkupComponent);t.Col=s},function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(1);n(90);var o=function(e){function t(t){var n=e.call(this,name)||this;return n.name="HEADLINE",n.message=t,n.text=t.text,n.position=t.position,n}return r(t,e),t.prototype.render=function(e){var t=this.position||"left",n=document.createElement("h2");n.classList.add("headline",t),n.appendChild(new i.InlineText(this.text).render()),e.appendChild(n)},t}(s.MarkupComponent);t.Headline=o},function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);n(93);var s=function(e){function t(t){var n=e.call(this,name)||this;return n.name="IMAGE",n.source=t.source,n.text=t.text,n.width=t.width||"auto",n.height=t.height||"auto",n}return r(t,e),t.prototype.render=function(e){var t=document.createElement("img");t.setAttribute("src",this.source),t.setAttribute("alt",this.text),t.setAttribute("width",this.width),t.setAttribute("height",this.height),t.classList.add("image"),e.appendChild(t)},t}(i.MarkupComponent);t.Image=s},function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(1);n(96);var o=function(e){function t(t){var n=e.call(this,name)||this;return n.name="ITEM",n.text=t.text,n}return r(t,e),t.prototype.render=function(e){var t=document.createElement("li");t.classList.add("item"),t.appendChild(new i.InlineText(this.text).render()),e.appendChild(t)},t}(s.MarkupComponent);t.Item=o},function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);n(99);var s=function(e){function t(t){var n=e.call(this,name)||this;return n.name="ITEMS",n.elements=t.elements,n}return r(t,e),t.prototype.render=function(e,n){var r=document.createElement("ul");r.classList.add("items"),t.renderElements(r,this.elements,n),e.appendChild(r)},t}(i.MarkupComponent);t.Items=s},function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(1);n(102);var o=function(e){function t(t){var n=e.call(this,name)||this;return n.name="LINK",n.text=t.text,n.value=t.value,n}return r(t,e),t.prototype.render=function(e){var t=document.createElement("a");t.setAttribute("href",this.value),t.classList.add("link"),t.appendChild(new i.InlineText(this.text).render()),e.appendChild(t)},t}(s.MarkupComponent);t.Link=o},function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);n(105);var s=function(e){function t(t){var n=e.call(this,name)||this;return n.name="ROW",n.message=t,n}return r(t,e),t.prototype.render=function(e,n){var r=document.createElement("tr");r.classList.add("row"),t.renderElements(r,this.message,n),e.appendChild(r)},t}(i.MarkupComponent);t.Row=s},function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(1);n(18),n(19),n(108);var o=function(e){function t(t){var n=e.call(this,name)||this;return n.name="SUBMIT",n.text=t.text,n.position=t.position,n.timestamp=t.timestamp,n}return r(t,e),t.closestByClass=function(e,t){for(;e.className!=t;)if(!(e=e.parentNode))return null;return e},t.prototype.render=function(e,n){var r=this.position||"left",s=document.createElement("button");t.isNested(e)?s.classList.add("submit-nested",r):s.classList.add("submit",r),s.appendChild(new i.InlineText(this.text).render()),e.appendChild(s);var o=this.text,a=this.timestamp;s.addEventListener("click",function(e){return function(){var r={};t.closestByClass(e,"message-content").querySelectorAll("input[type='checkbox']").forEach(function(e,t){if(!0===t.checked){var n=t.getAttribute("name"),i=t.getAttribute("value");void 0!==r[n]?r[n].push(i):r[n]=[i]}}),n({type:"submit",position:"right",timestamp:a,text:o,attributes:r})}})},t}(s.MarkupComponent);t.Submit=o},function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),s=n(17),o=function(e){function t(t){var n=e.call(this,name)||this;return n.name="TABLE",n.message=t,n.position=t.position,n}return r(t,e),t.prototype.render=function(e,n){var r=document.createElement("table");if(t.isNested(e))r.classList.add("table-nested"),t.renderElements(r,this.message,n);else{var o=this.position||"left";r.classList.add("table",o),r.appendChild(s.TextTime.render()),t.renderElements(r,this.message,n),e.appendChild(new i.TextIcon(o).render())}e.appendChild(r)},t}(n(1).MarkupComponent);t.Table=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(16),o=n(17),a=function(e){function t(t){var n=e.call(this,name)||this;return n.name="TEXT",n.text=t.text,n.position=t.position,n}return r(t,e),t.isNested=function(e){return e.hasClass("block")||"TD"===e.prop("tagName")},t.prototype.render=function(e){if(t.isNested(e))e.appendChild(new i.InlineText(this.text).render());else{var n=this.position||"left",r=document.createElement("div");r.classList.add("text",n),r.appendChild(o.TextTime.render()),r.appendChild(new i.InlineText(this.text).render()),e.appendChild(new s.TextIcon(n).render()),e.appendChild(r)}},t}(n(1).MarkupComponent);t.Text=a},function(e,t,n){e.exports=n(113)},function(e,t,n){(function(e){(function(){var r,i,s,o,a,c,h,u,p,d,l,f,_,g,m,v,y=function(e,t){for(var n in t)b.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},b={}.hasOwnProperty,E=function(e,t){return function(){return e.apply(t,arguments)}};a=n(2),c=n(14),v=n(114),m=n(3),_=n(116),f=n(139),g=n(140),u=n(141),d=n(142),l=n(143),o=n(144),p=function(){var t;try{t=c.readFileSync(e+"/../package.json","utf-8")}catch(e){}return t?JSON.parse(t).version:null},r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.welcome_screen=function(e,t){return t.setHeader("content-type","text/plain; charset=UTF-8"),t.writeHead(200),t.end("Welcome to SockJS!\n"),!0},t.prototype.handle_404=function(e,t){return t.setHeader("content-type","text/plain; charset=UTF-8"),t.writeHead(404),t.end("404 Error: Page not found\n"),!0},t.prototype.disabled_transport=function(e,t,n){return this.handle_404(e,t,n)},t.prototype.h_sid=function(e,t,n){var r;return e.cookies=m.parseCookie(e.headers.cookie),"function"==typeof this.options.jsessionid?this.options.jsessionid(e,t):this.options.jsessionid&&t.setHeader&&(r=e.cookies.JSESSIONID||"dummy",t.setHeader("Set-Cookie","JSESSIONID="+r+"; path=/")),n},t.prototype.log=function(e,t){return this.options.log(e,t)},t}(v.GenericApp),m.objectExtend(r.prototype,u.app),m.objectExtend(r.prototype,o.app),m.objectExtend(r.prototype,_.app),m.objectExtend(r.prototype,f.app),m.objectExtend(r.prototype,g.app),m.objectExtend(r.prototype,d.app),m.objectExtend(r.prototype,l.app),h=function(e){var t,n,r,i,s;return i=function(e){return[n("/([^/.]+)/([^/.]+)"+e),"server","session"]},t=function(e){return null==e&&(e="xhr_options"),["h_sid","xhr_cors","cache_for",e,"expose"]},r=[["GET",(n=function(t){return new RegExp("^"+e.prefix+t+"[/]?$")})(""),["welcome_screen"]],["GET",n("/iframe[0-9-.a-z_]*.html"),["iframe","cache_for","expose"]],["OPTIONS",n("/info"),t("info_options")],["GET",n("/info"),["xhr_cors","h_no_cache","info","expose"]],["OPTIONS",n("/chunking_test"),t()],["POST",n("/chunking_test"),["xhr_cors","expect_xhr","chunking_test"]]],s=[["GET",i("/jsonp"),["h_sid","h_no_cache","jsonp"]],["POST",i("/jsonp_send"),["h_sid","h_no_cache","expect_form","jsonp_send"]],["POST",i("/xhr"),["h_sid","h_no_cache","xhr_cors","xhr_poll"]],["OPTIONS",i("/xhr"),t()],["POST",i("/xhr_send"),["h_sid","h_no_cache","xhr_cors","expect_xhr","xhr_send"]],["OPTIONS",i("/xhr_send"),t()],["POST",i("/xhr_streaming"),["h_sid","h_no_cache","xhr_cors","xhr_streaming"]],["OPTIONS",i("/xhr_streaming"),t()],["GET",i("/eventsource"),["h_sid","h_no_cache","eventsource"]],["GET",i("/htmlfile"),["h_sid","h_no_cache","htmlfile"]]],e.websocket?(r.push(["GET",n("/websocket"),["raw_websocket"]]),s.push(["GET",i("/websocket"),["sockjs_websocket"]])):(r.push(["GET",n("/websocket"),["cache_for","disabled_transport"]]),s.push(["GET",i("/websocket"),["cache_for","disabled_transport"]])),r.concat(s)},i=function(){function e(e,t){this.options=e,this.handler=E(this.handler,this),this.app=new r,this.app.options=this.options,this.app.emit=t,this.app.log("debug","SockJS v"+p()+" bound to "+JSON.stringify(this.options.prefix)),this.dispatcher=h(this.options),this.webjs_handler=v.generateHandler(this.app,this.dispatcher),this.path_regexp=new RegExp("^"+this.options.prefix+"([/].+|[/]?)$")}return e.prototype.handler=function(e,t,n){return!!e.url.match(this.path_regexp)&&(this.webjs_handler(e,t,n),!0)},e.prototype.getHandler=function(){return function(e){return function(t,n,r){return e.handler(t,n,r)}}(this)},e}(),s=function(e){function t(e){this.options={prefix:"",response_limit:131072,websocket:!0,faye_server_options:null,jsessionid:!1,heartbeat_delay:25e3,disconnect_delay:5e3,log:function(e,t){return console.log(t)},sockjs_url:"https://cdn.jsdelivr.net/sockjs/1/sockjs.min.js"},e&&m.objectExtend(this.options,e)}return y(t,e),t.prototype.listener=function(e){var t;return t=m.objectExtend({},this.options),e&&m.objectExtend(t,e),new i(t,function(e){return function(){return e.emit.apply(e,arguments)}}(this))},t.prototype.installHandlers=function(e,t){var n;return n=this.listener(t).getHandler(),m.overshadowListeners(e,"request",n),m.overshadowListeners(e,"upgrade",n),!0},t.prototype.middleware=function(e){var t;return(t=this.listener(e).getHandler()).upgrade=t,t},t}(a.EventEmitter),t.createServer=function(e){return new s(e)},t.listen=function(e,n){var r;return r=t.createServer(n),e&&r.installHandlers(e),r}}).call(this)}).call(this,"/")},function(e,t,n){(function(){var e,r,i,s,o,a,c;a=n(7),o=n(115),i=n(14),s=n(29),c=n(3),e=function(e,t,n,r,i){var s,o,a;try{for(o=[];t.length>0;)s=t.shift(),n.last_fun=s,o.push(i=e[s](n,r,i,n.next_filter));return o}catch(t){if("object"==typeof(a=t)&&"status"in a){if(0===a.status)return;"handle_"+a.status in e?e["handle_"+a.status](n,r,a):e.handle_error(n,r,a)}else e.handle_error(n,r,a);return e.log_request(n,r,!0)}},r=function(e,t){var n;return n={Connection:"close"},t.writeHead=function(r,i){var o,a;for(o in null==i&&(i={}),(a=[]).push("HTTP/"+e.httpVersion+" "+r+" "+s.STATUS_CODES[r]),c.objectExtend(n,i),n)a.push(o+": "+n[o]);a=a.concat(["",""]);try{t.write(a.join("\r\n"))}catch(e){}try{return t.end()}catch(e){}},t.setHeader=function(e,t){return n[e]=t}},t.generateHandler=function(t,n){return function(i,s,o){var h,u,p,d,l,f,_,g,m,v,y,b;for(void 0===s.writeHead&&r(i,s),c.objectExtend(i,a.parse(i.url,!0)),i.start_date=new Date,u=!1,h=[],l=0,_=n.length;l<_;l++)if(m=(b=n[l])[0],v=b[1],p=b[2],v.constructor!==Array&&(v=[v]),g=i.pathname.match(v[0])){if(i.method.match(new RegExp(m))){for(d=f=1,y=v.length;1<=y?f<y:f>y;d=1<=y?++f:--f)i[v[d]]=g[d];(p=p.slice(0)).push("log_request"),i.next_filter=function(n){return e(t,p,i,s,n)},i.next_filter(o),u=!0;break}h.push(m)}u||(0!==h.length?t.handle_405(i,s,h):t.handle_404(i,s),t.log_request(i,s,!0))}},t.GenericApp=function(){function e(){}return e.prototype.handle_404=function(e,t,n){return t.finished?n:(t.writeHead(404,{}),t.end(),!0)},e.prototype.handle_405=function(e,t,n){return t.writeHead(405,{Allow:n.join(", ")}),t.end(),!0},e.prototype.handle_error=function(e,t,n){if(t.finished)return n;if("object"==typeof n&&"status"in n)t.writeHead(n.status,{}),t.end(n.message||"");else{try{t.writeHead(500,{}),t.end("500 - Internal Server Error")}catch(e){n=e}this.log("error",'Exception on "'+e.method+" "+e.href+'" in filter "'+e.last_fun+'":\n'+(n.stack||n))}return!0},e.prototype.log_request=function(e,t,n){var r;return r=new Date-e.start_date,this.log("info",e.method+" "+e.url+" "+r+"ms "+(t.finished?t.statusCode:"(unfinished)")),n},e.prototype.log=function(e,t){return console.log(t)},e.prototype.expose_html=function(e,t,n){return t.finished?n:(t.getHeader("Content-Type")||t.setHeader("Content-Type","text/html; charset=UTF-8"),this.expose(e,t,n))},e.prototype.expose_json=function(e,t,n){return t.finished?n:(t.getHeader("Content-Type")||t.setHeader("Content-Type","application/json"),this.expose(e,t,JSON.stringify(n)))},e.prototype.expose=function(e,t,n){return t.finished?n:(n&&!t.getHeader("Content-Type")&&t.setHeader("Content-Type","text/plain"),n&&t.setHeader("Content-Length",n.length),t.writeHead(t.statusCode),t.end(n,"utf8"),!0)},e.prototype.serve_file=function(e,t,n,r){var s;throw s=function(e,n){return e?(t.writeHead(500),t.end("can't read file")):(t.setHeader("Content-length",n.length),t.writeHead(t.statusCode,t.headers),t.end(n,"utf8")),r(!0)},i.readFile(n,s),{status:0}},e.prototype.cache_for=function(e,t,n){var r;return t.cache_for=t.cache_for||31536e3,t.setHeader("Cache-Control","public, max-age="+t.cache_for),(r=new Date).setTime(r.getTime()+1e3*t.cache_for),t.setHeader("Expires",r.toGMTString()),n},e.prototype.h_no_cache=function(e,t,n){return t.setHeader("Cache-Control","no-store, no-cache, no-transform, must-revalidate, max-age=0"),n},e.prototype.expect_form=function(e,t,n,r){var i;throw i=new Buffer(0),e.on("data",function(e){return i=c.buffer_concat(i,new Buffer(e,"binary"))}),e.on("end",function(t){return function(){var n;switch(i=i.toString("utf-8"),(e.headers["content-type"]||"").split(";")[0]){case"application/x-www-form-urlencoded":n=o.parse(i);break;case"text/plain":case"":n=i;break;default:t.log("error","Unsupported content-type "+e.headers["content-type"]),n=void 0}return r(n)}}(this)),{status:0}},e.prototype.expect_xhr=function(e,t,n,r){var i;throw i=new Buffer(0),e.on("data",function(e){return i=c.buffer_concat(i,new Buffer(e,"binary"))}),e.on("end",function(t){return function(){var n;switch(i=i.toString("utf-8"),(e.headers["content-type"]||"").split(";")[0]){case"text/plain":case"T":case"application/json":case"application/xml":case"":case"text/xml":n=i;break;default:t.log("error","Unsupported content-type "+e.headers["content-type"]),n=void 0}return r(n)}}(this)),{status:0}},e}()}).call(this)},function(e,t){e.exports=require("querystring")},function(e,t,n){(function(){var e,r,i,s,o,a=function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;e=n(117),n(3),o=n(10),t.app={_websocket_check:function(t,n,r){if(!e.isWebSocket(t))throw{status:400,message:"Not a valid websocket request"}},sockjs_websocket:function(t,n,r){var i;return this._websocket_check(t,n,r),(i=new e(t,n,r,null,this.options.faye_server_options)).onopen=function(e){return function(){return o.registerNoSession(t,e,new s(i,n))}}(this),!0},raw_websocket:function(t,n,i){var s,o;if(this._websocket_check(t,n,i),s=t.headers["sec-websocket-version"]||"",-1===["8","13"].indexOf(s))throw{status:400,message:"Only supported WebSocket protocol is RFC 6455."};return(o=new e(t,n,i,null,this.options.faye_server_options)).onopen=function(e){return function(){return new r(t,n,e,o)}}(this),!0}},s=function(e){function t(e,n){this.ws=e,this.connection=n;try{this.connection.setKeepAlive(!0,5e3),this.connection.setNoDelay(!0)}catch(e){}this.ws.addEventListener("message",function(e){return function(t){return e.didMessage(t.data)}}(this)),this.heartbeat_cb=function(e){return function(){return e.heartbeat_timeout()}}(this),t.__super__.constructor.call(this,this.connection)}return a(t,e),t.prototype.protocol="websocket",t.prototype.setUp=function(){return t.__super__.setUp.apply(this,arguments),this.ws.addEventListener("close",this.thingy_end_cb)},t.prototype.tearDown=function(){return this.ws.removeEventListener("close",this.thingy_end_cb),t.__super__.tearDown.apply(this,arguments)},t.prototype.didMessage=function(e){var t,n,r,i,s;if(this.ws&&this.session&&e.length>0){try{r=JSON.parse(e)}catch(e){return this.didClose(3e3,"Broken framing.")}if("["===e[0]){for(s=[],t=0,n=r.length;t<n;t++)i=r[t],s.push(this.session.didMessage(i));return s}return this.session.didMessage(r)}},t.prototype.doSendFrame=function(e){if(this.ws)try{return this.ws.send(e),!0}catch(e){}return!1},t.prototype.didClose=function(e,n){null==e&&(e=1e3),null==n&&(n="Normal closure"),t.__super__.didClose.apply(this,arguments);try{this.ws.close(e,n,!1)}catch(e){}return this.ws=null,this.connection=null},t.prototype.heartbeat=function(){var e;return this.ws.ping(null,function(){return clearTimeout(e)})?e=setTimeout(this.heartbeat_cb,1e4):t.__super__.heartbeat.apply(this,arguments)},t.prototype.heartbeat_timeout=function(){if(null!=this.session)return this.session.close(3e3,"No response from heartbeat")},t}(o.GenericReceiver),i=o.Transport,r=function(e){function t(e,t,n,r){this.ws=r,this.prefix=n.options.prefix,this.readyState=i.OPEN,this.recv={connection:t,protocol:"websocket-raw"},this.connection=new o.SockJSConnection(this),this.decorateConnection(e),n.emit("connection",this.connection),this._end_cb=function(e){return function(){return e.didClose()}}(this),this.ws.addEventListener("close",this._end_cb),this._message_cb=function(e){return function(t){return e.didMessage(t)}}(this),this.ws.addEventListener("message",this._message_cb)}return a(t,e),t.prototype.didMessage=function(e){this.readyState===i.OPEN&&this.connection.emit("data",e.data)},t.prototype.send=function(e){return this.readyState===i.OPEN&&(this.ws.send(e),!0)},t.prototype.close=function(e,t){return null==e&&(e=1e3),null==t&&(t="Normal closure"),this.readyState===i.OPEN&&(this.readyState=i.CLOSING,this.ws.close(e,t,!1),!0)},t.prototype.didClose=function(){if(this.ws){this.ws.removeEventListener("message",this._message_cb),this.ws.removeEventListener("close",this._end_cb);try{this.ws.close(1e3,"Normal closure",!1)}catch(e){}return this.ws=null,this.readyState=i.CLOSED,this.connection.emit("end"),this.connection.emit("close"),this.connection=null}},t}(o.Session)}).call(this)},function(e,t,n){var r=n(0),i=n(11),s=n(22),o=function(e,t,n,r,o){o=o||{},this._stream=t,this._driver=i.http(e,{maxLength:o.maxLength,protocols:r});var a=this;if(this._stream&&this._stream.writable){if(!this._stream.readable)return this._stream.end();var c=function(){a._stream.removeListener("data",c)};this._stream.on("data",c),s.call(this,o),process.nextTick(function(){a._driver.start(),a._driver.io.write(n)})}};r.inherits(o,s),o.isWebSocket=function(e){return i.isWebSocket(e)},o.validateOptions=function(e,t){i.validateOptions(e,t)},o.WebSocket=o,o.Client=n(133),o.EventSource=n(135),e.exports=o},function(e,t,n){"use strict";var r=n(9).Stream,i=n(0),s=function(e){this.readable=this.writable=!0,this._paused=!1,this._driver=e};i.inherits(s,r),s.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0},s.prototype.resume=function(){this._paused=!1,this.emit("drain");var e=this._driver.messages;e._paused=!1,e.emit("drain")},s.prototype.write=function(e){return!!this.writable&&(this._driver.parse(e),!this._paused)},s.prototype.end=function(e){if(this.writable){void 0!==e&&this.write(e),this.writable=!1;var t=this._driver.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))}},s.prototype.destroy=function(){this.end()};var o=function(e){this.readable=this.writable=!0,this._paused=!1,this._driver=e};i.inherits(o,r),o.prototype.pause=function(){this._driver.io._paused=!0},o.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")},o.prototype.write=function(e){return!!this.writable&&("string"==typeof e?this._driver.text(e):this._driver.binary(e),!this._paused)},o.prototype.end=function(e){void 0!==e&&this.write(e)},o.prototype.destroy=function(){},t.IO=s,t.Messages=o},function(e,t,n){"use strict";var r=function(){this._queue=[],this._queueSize=0,this._offset=0};r.prototype.put=function(e){e&&0!==e.length&&(e.copy||(e=new Buffer(e)),this._queue.push(e),this._queueSize+=e.length)},r.prototype.read=function(e){if(e>this._queueSize)return null;if(0===e)return new Buffer(0);this._queueSize-=e;var t,n,r=this._queue,i=e,s=r[0];if(s.length>=e)return s.length===e?r.shift():(n=s.slice(0,e),r[0]=s.slice(e),n);for(var o=0,a=r.length;o<a&&!(i<r[o].length);o++)i-=r[o].length;return t=r.splice(0,o),i>0&&r.length>0&&(t.push(r[0].slice(0,i)),r[0]=r[0].slice(i)),this._concat(t,e)},r.prototype.eachByte=function(e,t){for(var n,r,i;this._queue.length>0;){for(r=(n=this._queue[0]).length;this._offset<r;)i=this._offset,this._offset+=1,e.call(t,n[i]);this._offset=0,this._queue.shift()}},r.prototype._concat=function(e,t){if(Buffer.concat)return Buffer.concat(e,t);for(var n=new Buffer(t),r=0,i=0,s=e.length;i<s;i++)e[i].copy(n,r),r+=e[i].length;return n},e.exports=r},function(e,t,n){"use strict";var r=n(5),i=n(7),s=n(0),o=n(21),a=n(6),c=n(31),h=n(130),u=function(e,t){this.version="hybi-13",c.call(this,null,e,t),this.readyState=-1,this._key=u.generateKey(),this._accept=c.generateAccept(this._key),this._http=new o("response");var n=i.parse(this.url),r=n.auth&&new Buffer(n.auth,"utf8").toString("base64");if(this.VALID_PROTOCOLS.indexOf(n.protocol)<0)throw new Error(this.url+" is not a valid WebSocket URL");this._pathname=(n.pathname||"/")+(n.search||""),this._headers.set("Host",n.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version","13"),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),r&&this._headers.set("Authorization","Basic "+r)};s.inherits(u,c),u.generateKey=function(){return r.randomBytes(16).toString("base64")};var p={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(e,t){return new h(this,e,t)},start:function(){return-1===this.readyState&&(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(e){if(3!==this.readyState){if(this.readyState>0)return c.prototype.parse.call(this,e);this._http.parse(e),this._http.isComplete()&&(this._validateHandshake(),3!==this.readyState&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var e=this._extensions.generateOffer();e&&this._headers.set("Sec-WebSocket-Extensions",e);var t=["GET "+this._pathname+" HTTP/1.1",this._headers.toString(),""];return new Buffer(t.join("\r\n"),"utf8")},_failHandshake:function(e){e="Error during WebSocket handshake: "+e,this.readyState=3,this.emit("error",new Error(e)),this.emit("close",new a.CloseEvent(this.ERRORS.protocol_error,e))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(101!==this._http.statusCode)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var e=this._http.headers,t=e.upgrade||"",n=e.connection||"",r=e["sec-websocket-accept"]||"",i=e["sec-websocket-protocol"]||"";if(""===t)return this._failHandshake("'Upgrade' header is missing");if("websocket"!==t.toLowerCase())return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(""===n)return this._failHandshake("'Connection' header is missing");if("upgrade"!==n.toLowerCase())return this._failHandshake("'Connection' header value is not 'Upgrade'");if(r!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,""!==i){if(this._protocols.indexOf(i)<0)return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=i}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(e){return this._failHandshake(e.message)}}};for(var d in p)u.prototype[d]=p[d];e.exports=u},function(e,t,n){var r=n(122);function i(e){r.ok(e===i.REQUEST||e===i.RESPONSE),this.type=e,this.state=e+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1}t.HTTPParser=i,i.encoding="ascii",i.maxHeaderSize=81920,i.REQUEST="REQUEST",i.RESPONSE="RESPONSE";var s=i.kOnHeaders=0,o=i.kOnHeadersComplete=1,a=i.kOnBody=2,c=i.kOnMessageComplete=3;i.prototype[s]=i.prototype[o]=i.prototype[a]=i.prototype[c]=function(){};var h=!0;Object.defineProperty(i,"kOnExecute",{get:function(){return h=!1,4}});var u=t.methods=i.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK"],p=u.indexOf("CONNECT");i.prototype.reinitialize=i,i.prototype.close=i.prototype.pause=i.prototype.resume=i.prototype.free=function(){},i.prototype._compatMode0_11=!1,i.prototype.getAsyncId=function(){return 0};var d={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};i.prototype.execute=function(e,t,n){if(!(this instanceof i))throw new TypeError("not a HTTPParser");t=t||0,n="number"==typeof n?n:e.length,this.chunk=e,this.offset=t;var r=this.end=t+n;try{for(;this.offset<r&&!this[this.state](););}catch(e){if(this.isUserCall)throw e;return this.hadError=!0,e}return this.chunk=null,n=this.offset-t,d[this.state]&&(this.headerSize+=n,this.headerSize>i.maxHeaderSize)?new Error("max header size exceeded"):n};var l={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};i.prototype.finish=function(){if(!this.hadError)return l[this.state]?void("BODY_RAW"===this.state&&this.userCall()(this[c]())):new Error("invalid state for EOF")},i.prototype.consume=i.prototype.unconsume=i.prototype.getCurrentBuffer=function(){},i.prototype.userCall=function(){this.isUserCall=!0;var e=this;return function(t){return e.isUserCall=!1,t}},i.prototype.nextRequest=function(){this.userCall()(this[c]()),this.reinitialize(this.type)},i.prototype.consumeLine=function(){for(var e=this.end,t=this.chunk,n=this.offset;n<e;n++)if(10===t[n]){var r=this.line+t.toString(i.encoding,this.offset,n);return"\r"===r.charAt(r.length-1)&&(r=r.substr(0,r.length-1)),this.line="",this.offset=n+1,r}this.line+=t.toString(i.encoding,this.offset,this.end),this.offset=this.end};var f=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,_=/^[ \t]+(.*[^ \t])/;i.prototype.parseHeader=function(e,t){if(-1!==e.indexOf("\r"))throw v("HPE_LF_EXPECTED");var n=f.exec(e),r=n&&n[1];if(r)t.push(r),t.push(n[2]);else{var i=_.exec(e);i&&t.length&&(t[t.length-1]&&(t[t.length-1]+=" "),t[t.length-1]+=i[1])}};var g=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;i.prototype.REQUEST_LINE=function(){var e=this.consumeLine();if(e){var t=g.exec(e);if(null===t)throw v("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?t[1]:u.indexOf(t[1]),-1===this.info.method)throw new Error("invalid request method");this.info.url=t[2],this.info.versionMajor=+t[3],this.info.versionMinor=+t[4],this.body_bytes=0,this.state="HEADER"}};var m=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;function v(e){var t=new Error("Parse Error");return t.code=e,t}i.prototype.RESPONSE_LINE=function(){var e=this.consumeLine();if(e){var t=m.exec(e);if(null===t)throw v("HPE_INVALID_CONSTANT");this.info.versionMajor=+t[1],this.info.versionMinor=+t[2];var n=this.info.statusCode=+t[3];this.info.statusMessage=t[4],1!=(n/100|0)&&204!==n&&304!==n||(this.body_bytes=0),this.state="HEADER"}},i.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(-1!==this.connection.indexOf("close"))return!1}else if(-1===this.connection.indexOf("keep-alive"))return!1;return!(null===this.body_bytes&&!this.isChunked)},i.prototype.HEADER=function(){var e=this.consumeLine();if(void 0!==e){var t=this.info;if(e)this.parseHeader(e,t.headers);else{for(var n,r,s=t.headers,a=!1,c=!1,u=0;u<s.length;u+=2)switch(s[u].toLowerCase()){case"transfer-encoding":this.isChunked="chunked"===s[u+1].toLowerCase();break;case"content-length":if(n=+s[u+1],a){if(n!==this.body_bytes)throw v("HPE_UNEXPECTED_CONTENT_LENGTH")}else a=!0,this.body_bytes=n;break;case"connection":this.connection+=s[u+1].toLowerCase();break;case"upgrade":c=!0}if(this.isChunked&&a&&(this.isChunked=!1),c&&-1!=this.connection.indexOf("upgrade")?t.upgrade=this.type===i.REQUEST||101===t.statusCode:t.upgrade=t.method===p,t.shouldKeepAlive=this.shouldKeepAlive(),2===(r=h?this.userCall()(this[o](t)):this.userCall()(this[o](t.versionMajor,t.versionMinor,t.headers,t.method,t.url,t.statusCode,t.statusMessage,t.upgrade,t.shouldKeepAlive))))return this.nextRequest(),!0;if(this.isChunked&&!r)this.state="BODY_CHUNKHEAD";else{if(r||0===this.body_bytes)return this.nextRequest(),t.upgrade;null===this.body_bytes?this.state="BODY_RAW":this.state="BODY_SIZED"}}}},i.prototype.BODY_CHUNKHEAD=function(){var e=this.consumeLine();void 0!==e&&(this.body_bytes=parseInt(e,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")},i.prototype.BODY_CHUNK=function(){var e=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[a](this.chunk,this.offset,e)),this.offset+=e,this.body_bytes-=e,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")},i.prototype.BODY_CHUNKEMPTYLINE=function(){var e=this.consumeLine();void 0!==e&&(r.equal(e,""),this.state="BODY_CHUNKHEAD")},i.prototype.BODY_CHUNKTRAILERS=function(){var e=this.consumeLine();void 0!==e&&(e?this.parseHeader(e,this.trailers):(this.trailers.length&&this.userCall()(this[s](this.trailers,"")),this.nextRequest()))},i.prototype.BODY_RAW=function(){var e=this.end-this.offset;this.userCall()(this[a](this.chunk,this.offset,e)),this.offset=this.end},i.prototype.BODY_SIZED=function(){var e=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[a](this.chunk,this.offset,e)),this.offset+=e,this.body_bytes-=e,this.body_bytes||this.nextRequest()},["Headers","HeadersComplete","Body","MessageComplete"].forEach(function(e){var t=i["kOn"+e];Object.defineProperty(i.prototype,"on"+e,{get:function(){return this[t]},set:function(e){return this._compatMode0_11=!0,p="CONNECT",this[t]=e}})})},function(e,t){e.exports=require("assert")},function(e,t,n){"use strict";var r=n(124),i=n(125),s=function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}};s.MESSAGE_OPCODES=[1,2];var o={add:function(e){if("string"!=typeof e.name)throw new TypeError("extension.name must be a string");if("permessage"!==e.type)throw new TypeError('extension.type must be "permessage"');if("boolean"!=typeof e.rsv1)throw new TypeError("extension.rsv1 must be true or false");if("boolean"!=typeof e.rsv2)throw new TypeError("extension.rsv2 must be true or false");if("boolean"!=typeof e.rsv3)throw new TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(e.name))throw new TypeError('An extension with name "'+e.name+'" is already registered');this._byName[e.name]=e,this._inOrder.push(e)},generateOffer:function(){var e=[],t=[],n={};return this._inOrder.forEach(function(i){var s=i.createClientSession();if(s){var o=[i,s];e.push(o),n[i.name]=o;var a=s.generateOffer();(a=a?[].concat(a):[]).forEach(function(e){t.push(r.serializeParams(i.name,e))},this)}},this),this._sessions=e,this._index=n,t.length>0?t.join(", "):null},activate:function(e){var t=[];r.parseHeader(e).eachOffer(function(e,n){var i=this._index[e];if(!i)throw new Error('Server sent an extension response for unknown extension "'+e+'"');var s=i[0],o=i[1],a=this._reserved(s);if(a)throw new Error("Server sent two extension responses that use the RSV"+a[0]+' bit: "'+a[1]+'" and "'+s.name+'"');if(!0!==o.activate(n))throw new Error("Server sent unacceptable extension parameters: "+r.serializeParams(e,n));this._reserve(s),t.push(i)},this),this._sessions=t,this._pipeline=new i(t)},generateResponse:function(e){var t=[],n=[],s=r.parseHeader(e);return this._inOrder.forEach(function(e){var i=s.byName(e.name);if(0!==i.length&&!this._reserved(e)){var o=e.createServerSession(i);o&&(this._reserve(e),t.push([e,o]),n.push(r.serializeParams(e.name,o.generateResponse())))}},this),this._sessions=t,this._pipeline=new i(t),n.length>0?n.join(", "):null},validFrameRsv:function(e){var t,n={rsv1:!1,rsv2:!1,rsv3:!1};if(s.MESSAGE_OPCODES.indexOf(e.opcode)>=0)for(var r=0,i=this._sessions.length;r<i;r++)t=this._sessions[r][0],n.rsv1=n.rsv1||t.rsv1,n.rsv2=n.rsv2||t.rsv2,n.rsv3=n.rsv3||t.rsv3;return(n.rsv1||!e.rsv1)&&(n.rsv2||!e.rsv2)&&(n.rsv3||!e.rsv3)},processIncomingMessage:function(e,t,n){this._pipeline.processIncomingMessage(e,t,n)},processOutgoingMessage:function(e,t,n){this._pipeline.processOutgoingMessage(e,t,n)},close:function(e,t){if(!this._pipeline)return e.call(t);this._pipeline.close(e,t)},_reserve:function(e){this._rsv1=this._rsv1||e.rsv1&&e.name,this._rsv2=this._rsv2||e.rsv2&&e.name,this._rsv3=this._rsv3||e.rsv3&&e.name},_reserved:function(e){return this._rsv1&&e.rsv1?[1,this._rsv1]:this._rsv2&&e.rsv2?[2,this._rsv2]:!(!this._rsv3||!e.rsv3)&&[3,this._rsv3]}};for(var a in o)s.prototype[a]=o[a];e.exports=s},function(e,t,n){"use strict";var r=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,i=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,s=new RegExp(r.source+"(?:=(?:"+r.source+"|"+/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"])*)"/.source+"))?"),o=new RegExp(r.source+"(?: *; *"+s.source+")*","g"),a=new RegExp("^"+o.source+"(?: *, *"+o.source+")*$"),c=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,h=Object.prototype.hasOwnProperty,u={parseHeader:function(e){var t=new p;if(""===e||void 0===e)return t;if(!a.test(e))throw new SyntaxError("Invalid Sec-WebSocket-Extensions header: "+e);return e.match(o).forEach(function(e){var n=e.match(new RegExp(s.source,"g")),r=n.shift(),i={};n.forEach(function(e){var t,n=e.match(s),r=n[1];t=void 0!==n[2]?n[2]:void 0===n[3]||n[3].replace(/\\/g,""),c.test(t)&&(t=parseFloat(t)),h.call(i,r)?(i[r]=[].concat(i[r]),i[r].push(t)):i[r]=t},this),t.push(r,i)},this),t},serializeParams:function(e,t){var n=[],r=function(e,t){t instanceof Array?t.forEach(function(t){r(e,t)}):!0===t?n.push(e):"number"==typeof t?n.push(e+"="+t):i.test(t)?n.push(e+'="'+t.replace(/"/g,'\\"')+'"'):n.push(e+"="+t)};for(var s in t)r(s,t[s]);return[e].concat(n).join("; ")}},p=function(){this._byName={},this._inOrder=[]};p.prototype.push=function(e,t){h.call(this._byName,e)||(this._byName[e]=[]),this._byName[e].push(t),this._inOrder.push({name:e,params:t})},p.prototype.eachOffer=function(e,t){for(var n=this._inOrder,r=0,i=n.length;r<i;r++)e.call(t,n[r].name,n[r].params)},p.prototype.byName=function(e){return this._byName[e]||[]},p.prototype.toArray=function(){return this._inOrder.slice()},e.exports=u},function(e,t,n){"use strict";var r=n(126),i=n(33),s=function(e){this._cells=e.map(function(e){return new r(e)}),this._stopped={incoming:!1,outgoing:!1}};s.prototype.processIncomingMessage=function(e,t,n){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,e,t,n)},s.prototype.processOutgoingMessage=function(e,t,n){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,e,t,n)},s.prototype.close=function(e,t){this._stopped={incoming:!0,outgoing:!0};var n=this._cells.map(function(e){return e.close()});e&&i.all(n).then(function(){e.call(t)})},s.prototype._loop=function(e,t,n,r,i,s,o){for(var a=this._cells,c=a.length,h=this;c--;)a[c].pending(e);var u=function(t,i,c){if(t===n)return s.call(o,i,c);a[t][e](i,c,function(n,i){n&&(h._stopped[e]=!0),u(t+r,n,i)})};u(t,null,i)},e.exports=s},function(e,t,n){"use strict";var r=n(127),i=n(33),s=function(e){this._ext=e[0],this._session=e[1],this._functors={incoming:new r(this._session,"processIncomingMessage"),outgoing:new r(this._session,"processOutgoingMessage")}};s.prototype.pending=function(e){var t=this._functors[e];t._stopped||(t.pending+=1)},s.prototype.incoming=function(e,t,n,r){this._exec("incoming",e,t,n,r)},s.prototype.outgoing=function(e,t,n,r){this._exec("outgoing",e,t,n,r)},s.prototype.close=function(){return this._closed=this._closed||new i,this._doClose(),this._closed},s.prototype._exec=function(e,t,n,r,i){this._functors[e].call(t,n,function(e,t){e&&(e.message=this._ext.name+": "+e.message),r.call(i,e,t),this._doClose()},this)},s.prototype._doClose=function(){var e=this._functors.incoming,t=this._functors.outgoing;this._closed&&e.pending+t.pending===0&&(this._session&&this._session.close(),this._session=null,this._closed.done())},e.exports=s},function(e,t,n){"use strict";var r=n(32),i=function(e,t){this._session=e,this._method=t,this._queue=new r(i.QUEUE_SIZE),this._stopped=!1,this.pending=0};i.QUEUE_SIZE=8,i.prototype.call=function(e,t,n,r){if(!this._stopped){var i={error:e,message:t,callback:n,context:r,done:!1},s=!1,o=this;if(this._queue.push(i),i.error)return i.done=!0,this._stop(),this._flushQueue();var a=function(e,t){s^(s=!0)&&(e?(o._stop(),i.error=e,i.message=null):i.message=t,i.done=!0,o._flushQueue())};try{this._session[this._method](t,a)}catch(e){a(e)}}},i.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0},i.prototype._flushQueue=function(){for(var e,t=this._queue;t.length>0&&t.peek().done;)(e=t.shift()).error?(this.pending=0,t.clear()):this.pending-=1,e.callback.call(e.context,e.error,e.message)},e.exports=i},function(e,t,n){"use strict";var r=function(){},i={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(var s in i)r.prototype[s]=i[s];e.exports=r},function(e,t,n){"use strict";var r=function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},i={read:function(){if(this.data)return this.data;this.data=new Buffer(this.length);for(var e=0,t=0,n=this._chunks.length;t<n;t++)this._chunks[t].copy(this.data,e),e+=this._chunks[t].length;return this.data},pushFrame:function(e){this.rsv1=this.rsv1||e.rsv1,this.rsv2=this.rsv2||e.rsv2,this.rsv3=this.rsv3||e.rsv3,null===this.opcode&&(this.opcode=e.opcode),this._chunks.push(e.payload),this.length+=e.length}};for(var s in i)r.prototype[s]=i[s];e.exports=r},function(e,t,n){"use strict";var r=n(9).Stream,i=n(7),s=n(0),o=n(6),a=n(20),c=n(21),h={"ws:":80,"wss:":443},u=function(e,t,n){this._client=e,this._http=new c("response"),this._origin="object"==typeof e.url?e.url:i.parse(e.url),this._url="object"==typeof t?t:i.parse(t),this._options=n||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new a,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var r=this._url.auth&&new Buffer(this._url.auth,"utf8").toString("base64");r&&this._headers.set("Proxy-Authorization","Basic "+r)};s.inherits(u,r);var p={setHeader:function(e,t){return 0===this._state&&(this._headers.set(e,t),!0)},start:function(){if(0!==this._state)return!1;this._state=1;var e=this._origin,t=e.port||h[e.protocol],n=["CONNECT "+e.hostname+":"+t+" HTTP/1.1",this._headers.toString(),""];return this.emit("data",new Buffer(n.join("\r\n"),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(e){if(!this.writable)return!1;if(this._http.parse(e),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,200===this.statusCode)this.emit("connect",new o.ConnectEvent);else{var t="Can't establish a connection to the server at "+this._origin.href;this.emit("error",new Error(t))}return this.end(),!this._paused},end:function(e){this.writable&&(void 0!==e&&this.write(e),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(var d in p)u.prototype[d]=p[d];e.exports=u},function(e,t,n){"use strict";var r=n(0),i=n(21),s=n(6),o=n(34),a=n(132),c=n(31),h=function(e){s.call(this,null,null,e),this._http=new i("request")};r.inherits(h,s);var u={EVENTS:["open","message","error","close"],_bindEventListeners:function(){this.messages.on("error",function(){}),this.on("error",function(){})},parse:function(e){if(this._delegate)return this._delegate.parse(e);if(this._http.parse(e),this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var t=this;this._delegate=h.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach(function(e){this._delegate.on(e,function(n){t.emit(e,n)})},this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new s.ConnectEvent)}},_open:function(){this.__queue.forEach(function(e){this._delegate[e[0]].apply(this._delegate,e[1])},this),this.__queue=[]}};for(var p in["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach(function(e){u[e]=function(){return this._delegate?this._delegate[e].apply(this._delegate,arguments):(this.__queue.push([e,arguments]),!0)}}),u)h.prototype[p]=u[p];h.isSecureRequest=function(e){if(e.connection&&void 0!==e.connection.authorized)return!0;if(e.socket&&e.socket.secure)return!0;var t=e.headers;return!!t&&("on"===t.https||"on"===t["x-forwarded-ssl"]||"https"===t["x-forwarded-scheme"]||"https"===t["x-forwarded-proto"])},h.determineUrl=function(e){return(this.isSecureRequest(e)?"wss:":"ws:")+"//"+e.headers.host+e.url},h.http=function(e,t){void 0===(t=t||{}).requireMasking&&(t.requireMasking=!0);var n=e.headers,r=this.determineUrl(e);return n["sec-websocket-version"]?new c(e,r,t):n["sec-websocket-key1"]?new a(e,r,t):new o(e,r,t)},e.exports=h},function(e,t,n){"use strict";var r=n(6),i=n(34),s=n(5),o=function(e){return parseInt(e.match(/[0-9]/g).join(""),10)},a=function(e){return e.match(/ /g).length},c=function(e,t,n){i.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)};n(0).inherits(c,i);var h={BODY_SIZE:8,start:function(){return!!i.prototype.start.call(this)&&(this._started=!0,this._sendHandshakeBody(),!0)},close:function(){return 3!==this.readyState&&(this._write(new Buffer([255,0])),this.readyState=3,this.emit("close",new r.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var e=(c=this._request.headers)["sec-websocket-key1"],t=o(e),n=a(e),r=c["sec-websocket-key2"],i=o(r),s=a(r);if(t%n!=0||i%s!=0)return this.emit("error",new Error("Client sent invalid Sec-WebSocket-Key headers")),this.close(),null;this._keyValues=[t/n,i/s];var c=["HTTP/1.1 101 WebSocket Protocol Handshake",this._headers.toString(),""];return new Buffer(c.join("\r\n"),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var e=s.createHash("md5"),t=new Buffer(8+this.BODY_SIZE);return t.writeUInt32BE(this._keyValues[0],0),t.writeUInt32BE(this._keyValues[1],4),new Buffer(this._body).copy(t,8,0,this.BODY_SIZE),e.update(t),new Buffer(e.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var e=this._handshakeSignature();e&&(this._write(e),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(e){if(255!==e)return i.prototype._parseLeadingByte.call(this,e);this._closing=!0,this._length=0,this._stage=1}};for(var u in h)c.prototype[u]=h[u];e.exports=c},function(e,t,n){var r=n(0),i=n(13),s=n(134),o=n(7),a=n(11),c=n(22),h=(n(12),{"http:":80,"https:":443,"ws:":80,"wss:":443}),u=["https:","wss:"],p=function(e,t,n){n=n||{},this.url=e,this._driver=a.client(this.url,{maxLength:n.maxLength,protocols:t}),["open","error"].forEach(function(e){this._driver.on(e,function(){m.headers=m._driver.headers,m.statusCode=m._driver.statusCode})},this);var r=n.proxy||{},p=o.parse(r.origin||this.url),d=p.port||h[p.protocol],l=u.indexOf(p.protocol)>=0,f=function(){m._onConnect()},_=n.tls||{},g=r.origin?r.tls||{}:_,m=this;_.ca=_.ca||n.ca,this._stream=l?s.connect(d,p.hostname,g,f):i.connect(d,p.hostname,f),r.origin&&this._configureProxy(r,_),c.call(this,n)};r.inherits(p,c),p.prototype._onConnect=function(){(this._proxy||this._driver).start()},p.prototype._configureProxy=function(e,t){var n,r=o.parse(this.url),i=u.indexOf(r.protocol)>=0,a=this;if(this._proxy=this._driver.proxy(e.origin),e.headers)for(n in e.headers)this._proxy.setHeader(n,e.headers[n]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",function(){if(i){var e={socket:a._stream,servername:r.hostname};for(n in t)e[n]=t[n];a._stream=s.connect(e),a._configureStream()}a._driver.io.pipe(a._stream),a._stream.pipe(a._driver.io),a._driver.start()}),this._proxy.on("error",function(e){a._driver.emit("error",e)})},e.exports=p},function(e,t){e.exports=require("tls")},function(e,t,n){var r=n(9).Stream,i=n(0),s=n(11),o=n(20),a=n(22),c=n(35),h=n(12),u=function(e,t,n){this.writable=!0,n=n||{},this._stream=t.socket,this._ping=n.ping||this.DEFAULT_PING,this._retry=n.retry||this.DEFAULT_RETRY;var r=s.isSecureRequest(e)?"https:":"http:";this.url=r+"//"+e.headers.host+e.url,this.lastEventId=e.headers["last-event-id"]||"",this.readyState=a.CONNECTING;var i=new o,c=this;if(n.headers)for(var h in n.headers)i.set(h,n.headers[h]);if(this._stream&&this._stream.writable){process.nextTick(function(){c._open()}),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var u="HTTP/1.1 200 OK\r\nContent-Type: text/event-stream\r\nCache-Control: no-cache, no-store\r\nConnection: close\r\n"+i.toString()+"\r\nretry: "+Math.floor(1e3*this._retry)+"\r\n\r\n";this._write(u),this._stream.on("drain",function(){c.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){c.ping()},1e3*this._ping)),["error","end"].forEach(function(e){c._stream.on(e,function(){c.close()})})}};i.inherits(u,r),u.isEventSource=function(e){return"GET"===e.method&&(e.headers.accept||"").split(/\s*,\s*/).indexOf("text/event-stream")>=0};var p={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(e){if(!this.writable)return!1;try{return this._stream.write(e,"utf8")}catch(e){return!1}},_open:function(){if(this.readyState===a.CONNECTING){this.readyState=a.OPEN;var e=new h("open");e.initEvent("open",!1,!1),this.dispatchEvent(e)}},write:function(e){return this.send(e)},end:function(e){void 0!==e&&this.write(e),this.close()},send:function(e,t){if(this.readyState>a.OPEN)return!1;e=String(e).replace(/(\r\n|\r|\n)/g,"$1data: ");var n="";return(t=t||{}).event&&(n+="event: "+t.event+"\r\n"),t.id&&(n+="id: "+t.id+"\r\n"),n+="data: "+e+"\r\n\r\n",this._write(n)},ping:function(){return this._write(":\r\n\r\n")},close:function(){if(this.readyState>a.OPEN)return!1;this.readyState=a.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var e=new h("close");return e.initEvent("close",!1,!1),this.dispatchEvent(e),!0}};for(var d in p)u.prototype[d]=p[d];for(var l in c)u.prototype[l]=c[l];e.exports=u},function(e,t,n){var r=n(137),i=n(138);e.exports=function(e,t,n){var s=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||i(o)}},function(e,t,n){var r=n(5);e.exports=function(){return r.randomBytes(16)}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){(function(){var e,r,i={}.hasOwnProperty;r=n(10),e=function(e){function t(e,n,r,i){this.callback=i,t.__super__.constructor.call(this,e,n,r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r.ResponseReceiver),t.prototype.protocol="jsonp-polling",t.prototype.max_response_size=1,t.prototype.doSendFrame=function(e){return t.__super__.doSendFrame.call(this,"/**/"+this.callback+"("+JSON.stringify(e)+");\r\n")},t}(),t.app={jsonp:function(t,n,i,s){var o;if(!("c"in t.query||"callback"in t.query))throw{status:500,message:'"callback" parameter required'};if(o="c"in t.query?t.query.c:t.query.callback,/[^a-zA-Z0-9-_.]/.test(o)||o.length>32)throw{status:500,message:'invalid "callback" parameter'};return n.setHeader("X-Content-Type-Options","nosniff"),n.setHeader("Content-Type","application/javascript; charset=UTF-8"),n.writeHead(200),r.register(t,this,new e(t,n,this.options,o)),!0},jsonp_send:function(e,t,n){var i,s,o,a,c;if(!n)throw{status:500,message:"Payload expected."};if("string"==typeof n)try{i=JSON.parse(n)}catch(e){throw{status:500,message:"Broken JSON encoding."}}else i=n.d;if("string"==typeof i&&i)try{i=JSON.parse(i)}catch(e){throw{status:500,message:"Broken JSON encoding."}}if(!i||i.__proto__.constructor!==Array)throw{status:500,message:"Payload expected."};if(null===(o=r.Session.bySessionId(e.session)))throw{status:404};for(s=0,a=i.length;s<a;s++)c=i[s],o.didMessage(c);return t.setHeader("Content-Length","2"),t.setHeader("Content-Type","text/plain; charset=UTF-8"),t.writeHead(200),t.end("ok"),!0}}}).call(this)},function(e,t,n){(function(){var e,r,i,s=function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o={}.hasOwnProperty;i=n(10),n(3),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.protocol="xhr-streaming",t.prototype.doSendFrame=function(e){return t.__super__.doSendFrame.call(this,e+"\n")},t}(i.ResponseReceiver),e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,r),t.prototype.protocol="xhr-polling",t.prototype.max_response_size=1,t}(),t.app={xhr_options:function(e,t){return t.statusCode=204,t.setHeader("Access-Control-Allow-Methods","OPTIONS, POST"),t.setHeader("Access-Control-Max-Age",t.cache_for),""},xhr_send:function(e,t,n){var r,s,o,a,c;if(!n)throw{status:500,message:"Payload expected."};try{r=JSON.parse(n)}catch(e){throw{status:500,message:"Broken JSON encoding."}}if(!r||r.__proto__.constructor!==Array)throw{status:500,message:"Payload expected."};if(!(o=i.Session.bySessionId(e.session)))throw{status:404};for(s=0,a=r.length;s<a;s++)c=r[s],o.didMessage(c);return t.setHeader("Content-Type","text/plain; charset=UTF-8"),t.writeHead(204),t.end(),!0},xhr_cors:function(e,t,n){var r,i;return this.options.disable_cors?n:(e.headers.origin?(i=e.headers.origin,t.setHeader("Access-Control-Allow-Credentials","true")):i="*",t.setHeader("Access-Control-Allow-Origin",i),t.setHeader("Vary","Origin"),(r=e.headers["access-control-request-headers"])&&t.setHeader("Access-Control-Allow-Headers",r),n)},xhr_poll:function(t,n,r,s){return n.setHeader("Content-Type","application/javascript; charset=UTF-8"),n.writeHead(200),i.register(t,this,new e(t,n,this.options)),!0},xhr_streaming:function(e,t,n,s){return t.setHeader("Content-Type","application/javascript; charset=UTF-8"),t.writeHead(200),t.write(Array(2049).join("h")+"\n"),i.register(e,this,new r(e,t,this.options)),!0}}}).call(this)},function(e,t,n){(function(){var e,r;r=n(3),e='<!DOCTYPE html>\n<html>\n<head>\n  <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n  <script src="{{ sockjs_url }}"><\/script>\n  <script>\n    document.domain = document.domain;\n    SockJS.bootstrap_iframe();\n  <\/script>\n</head>\n<body>\n  <h2>Don\'t panic!</h2>\n  <p>This is a SockJS hidden iframe. It\'s used for cross domain magic.</p>\n</body>\n</html>',t.app={iframe:function(t,n){var i,s,o,a;for(o in s={"{{ sockjs_url }}":this.options.sockjs_url},i=e,s)i=i.replace(o,s[o]);return a='"'+r.md5_hex(i)+'"',"if-none-match"in t.headers&&t.headers["if-none-match"]===a?(n.statusCode=304,""):(n.setHeader("Content-Type","text/html; charset=UTF-8"),n.setHeader("ETag",a),i)}}}).call(this)},function(e,t,n){(function(){var e,r,i,s={}.hasOwnProperty;i=n(3),r=n(10),e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r.ResponseReceiver),t.prototype.protocol="eventsource",t.prototype.doSendFrame=function(e){var n;return n=["data: ",i.escape_selected(e,"\r\n\0"),"\r\n\r\n"],t.__super__.doSendFrame.call(this,n.join(""))},t}(),t.app={eventsource:function(t,n){var i,s;return t.headers.origin&&"null"!==t.headers.origin?(s=t.headers.origin,n.setHeader("Access-Control-Allow-Credentials","true")):s="*",n.setHeader("Content-Type","text/event-stream"),n.setHeader("Access-Control-Allow-Origin",s),n.setHeader("Vary","Origin"),(i=t.headers["access-control-request-headers"])&&n.setHeader("Access-Control-Allow-Headers",i),n.writeHead(200),n.write("\r\n"),r.register(t,this,new e(t,n,this.options)),!0}}}).call(this)},function(e,t,n){(function(){var e,r,i,s={}.hasOwnProperty;n(3),i=n(10),r='<!doctype html>\n<html><head>\n  <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n</head><body><h2>Don\'t panic!</h2>\n  <script>\n    document.domain = document.domain;\n    var c = parent.{{ callback }};\n    c.start();\n    function p(d) {c.message(d);};\n    window.onload = function() {c.stop();};\n  <\/script>',r+=Array(1024-r.length+14).join(" "),r+="\r\n\r\n",e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i.ResponseReceiver),t.prototype.protocol="htmlfile",t.prototype.doSendFrame=function(e){return t.__super__.doSendFrame.call(this,"<script>\np("+JSON.stringify(e)+");\n<\/script>\r\n")},t}(),t.app={htmlfile:function(t,n){var s;if(!("c"in t.query||"callback"in t.query))throw{status:500,message:'"callback" parameter required'};if(s="c"in t.query?t.query.c:t.query.callback,/[^a-zA-Z0-9-_.]/.test(s))throw{status:500,message:'invalid "callback" parameter'};return n.setHeader("Content-Type","text/html; charset=UTF-8"),n.writeHead(200),n.write(r.replace(/{{ callback }}/g,s)),i.register(t,this,new e(t,n,this.options)),!0}}}).call(this)},function(e,t,n){(function(){var e;e=n(3),t.app={chunking_test:function(t,n,r,i){var s;return n.setHeader("Content-Type","application/javascript; charset=UTF-8"),n.writeHead(200),s=function(e){try{return n.write(e+"\n")}catch(e){}},e.timeout_chain([[0,function(){return s("h")}],[1,function(){return s(Array(2049).join(" ")+"h")}],[5,function(){return s("h")}],[25,function(){return s("h")}],[125,function(){return s("h")}],[625,function(){return s("h")}],[3125,function(){return s("h"),n.end()}]]),!0},info:function(t,n,r){var i;return i={websocket:this.options.websocket,origins:this.options.disable_cors?void 0:["*:*"],cookie_needed:!!this.options.jsessionid,entropy:e.random32()},"function"==typeof this.options.base_url?i.base_url=this.options.base_url():this.options.base_url&&(i.base_url=this.options.base_url),n.setHeader("Content-Type","application/json; charset=UTF-8"),n.writeHead(200),n.end(JSON.stringify(i))},info_options:function(e,t){return t.statusCode=204,t.setHeader("Access-Control-Allow-Methods","OPTIONS, GET"),t.setHeader("Access-Control-Max-Age",t.cache_for),""}}}).call(this)},function(e,t,n){}]).default});